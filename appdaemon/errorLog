2017-10-02 08:25:59.358715 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 316
    self.printMenu(payload_event,accessgroup)'''

	def alarmFunction(self, payload_event, accessgroup):
		alarm_service = TEXT_TO_SERVICE[ALARM_KEYBOARD_REVERSED[payload_event['text']]]
		self.log("Calling Alarm Service {}".format(alarm_service))
		service_result = self.call_service("alarm_control_panel/{}".format(alarm_service),entity_id = "alarm_control_panel.house", code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
		true_service_result = self.getTrueResult(service_result,"alarm_control_panel.house")
		self.log("Service Result - {}".format(true_service_result))
		if true_service_result['state'] == 'pending':
			message = "Pending due to {}".format(true_service_result['attributes']['trippedsensors'])
			self.handle = self.listen_state(self.armDelayCallback, entity_id = 'alarm_control_panel.house',old = 'pending', chat_id = payload_event['chat_id'], accessgroup = accessgroup)	
		else:
			message = "Alarm *{}*".format(str(true_service_result['state']).upper())
		keyboard = self.getKeyboard(true_service_result['state'], accessgroup)
		self.call_service("telegram_bot/send_message",
			target = payload_event['chat_id'],
			message = message,
			keyboard = keyboard)

	def armDelayCallback(self, entity, attribute, old, new, kwargs):
		self.log("CALLBACK DELAY - {} - {} - {}".format(old,new,kwargs))
		if new != 'disarmed':
			keyboard = self.getKeyboard(new, kwargs['accessgroup'])
			self.call_service("telegram_bot/send_message",
				target = kwargs['chat_id'],
				message = "Alarm *{}*".format(new.upper()),
				keyboard = keyboard)
		self.cancel_listen_event(self.handle)
    	
	def getTrueResult(self, data, entity_id):
		#self.log("DATA - {}".format(data))
		for item in data:
			#self.log("ITEM - {}".format(item))
			if item.get('entity_id') == entity_id:
				if self.handle is not None:
					self.cancel_listen_event(self.handle)
				return item
		return {"state":"already_{}".format(self.get_state(entity_id))}

	
	def sensorStatus(self, payload_event, accessgroup):
		self.log("Sensor Status")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		self.log(alarm_state)
	def bypass(self, payload_event, accessgroup):
		self.log("Bypass")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		self.log(alarm_state)
	def panic(self, payload_event, accessgroup):
		self.log("Panic")
		result = self.call_service("alarm_control_panel/alarm_trigger",entity_id = "alarm_control_panel.house",code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
		result = self.getTrueResult(result,"alarm_control_panel.house")
		self.log("True Result - {}".format(result))		
		keyboard = self.getKeyboard("triggered", accessgroup)
		self.call_service("telegram_bot/send_message",
			target = payload_event['chat_id'],
			message = "{} Alarm *{}*".format(u'\U000026d4',str(result['state']).upper()),
			keyboard = keyboard)
	def alarm_functions(self,payload_event, accessgroup):
		self.log("Serving Alarm Function Menu")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		status = "Current Alarm Status - *{}*".format(str(alarm_state['state']).upper())
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = status,
					disable_notification = True,
					keyboard = self.getKeyboard(alarm_state['state'],accessgroup,payload_event))
		self.log(status)
		self.log("+---}")
	def roomEntityControl(self,payload_event, accessgroup):
		entity = payload_event["text"].split()[-1]
		room_text = payload_event["text"][:-(len(entity)+1)]
		room_object = None
		for room in accessgroup["rooms"]:
			friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
			if friendly_name_temp==room_text:
				room_object = room
		
		self.log("{} - {}".format(entity,room_text))
		keyboard = []
		group_entities = self.get_state(room_object,"attributes")["entity_id"]
		for group_entity in group_entities:
			if group_entity in accessgroup[entity]:
				friendly_name_temp = str(self.get_state(group_entity,"friendly_name"))
				keyboard.append("Turn on {0},Turn off {0}".format(friendly_name_temp))
		keyboard.append("Turn on all {0} {1}".format(room_text,entity))
		keyboard.append("Turn off all {0} {1}".format(room_text,entity))
		keyboard.append("{} Back to {},{} Back to Menu".format(u'\U0001f448',room_text,u'\U0001f3e0'))
			
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Which {} in the {} do you want to control?".format(entity,room_text),
					disable_notification = True,
					keyboard = keyboard)
		self.log("+---}")
	def endsWithEntity(self, payload_event, accessgroup):
		functions = ["lights","switches","scenes"]
		for function in functions:
			if payload_event["text"].endswith(function):
				room_text = payload_event["text"][:-(len(function)+1)]
				for room in accessgroup["rooms"]:
					friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
					if friendly_name_temp==room_text:
						return True
		return False
	def roomControl(self, payload_event, accessgroup):
		self.log("Serving Room Control Menu")
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Which do you want to control?",
					disable_notification = True,
					keyboard = self.getKeyboard("room_control",accessgroup,payload_event))
		self.log("+---}")
	def isRoom(self, payload_event, accessgroup):
		for room in accessgroup["rooms"]:
			friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
			self.log("*{}* =? *{}*".format(payload_event["text"],friendly_name_temp))
			if payload_event["text"]==friendly_name_temp:
				return True
		return False
	def turn_on_off(self, payload_event,accessgroup, *args):
		isOn = False
		isAll = False
		text = (payload_event['text']).replace(" the "," ").lower()
		friendly_name = text[8:].lstrip().lower()
		if text.startswith("turn on"): isOn = True
		self.log("Checking if entity is a light...")
		entity_labels = ["lights","switches"]
		self.log("Entity - {}".format(friendly_name))
		if friendly_name.startswith("all "):
			payload_event['text'] = friendly_name.replace("all ","")
			if(payload_event['text'] in accessgroup):
				self.log("IS A ENTITY!!!")
				entities = []
				for entity in accessgroup[payload_event['text']]:
					entities.append(entity)
				self.entity_turn_on_off(entities,entity,isOn,payload_event)
			elif(self.endsWithEntity(payload_event,accessgroup)):
				self.log("ENDS WITH ROOM ENTITY")
				entity = payload_event["text"].split()[-1]
				room_text = payload_event["text"][:-(len(entity)+1)]
				room_object = None
				for room in accessgroup["rooms"]:
					friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
					if friendly_name_temp==room_text:
						room_object = room
				group_entities = self.get_state(room_object,"attributes")["entity_id"]
				entities = []
				for group_entity in group_entities:
					if group_entity in accessgroup[entity]:
						entities.append(group_entity)
				self.entity_turn_on_off(entities,entity,isOn,payload_event)
			return
		self.log("Entity - {}".format(friendly_name))
		for entity_label in entity_labels:
			for entity in accessgroup[entity_label]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name")).lower()
				if friendly_name==friendly_name_temp:
					self.log("Entity is a {}".format(entity_label))
					self.entity_turn_on_off(entity,friendly_name,isOn,payload_event)
					return
		self.log("Invalid Turn on/off request")
		self.errorMessage(payload_event, "Invalid Request")
				
	def entity_turn_on_off(self, entity_id,friendly_name, isOn, payload_event):
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Done {}".format(u'\U0001f44c'),
					disable_notification = False)
		if isOn:
			self.call_service("homeassistant/turn_on", entity_id = entity_id)
			self.log("Turning on {}".format(entity_id))
		else:
			self.call_service("homeassistant/turn_off", entity_id = entity_id)
			self.log("Turning off {}".format(entity_id))
		self.log("+---}")
	def getKeyboard(self,keyboard_type,accessgroup,payload_event = None):
		keyboard = []
		if keyboard_type=="menu":
			keyboard = accessgroup["menu"]
		elif keyboard_type=="switches" or keyboard_type=="lights" or keyboard_type=="other":
			for entity in accessgroup[keyboard_type]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name"))
				keyboard.append("Turn on {0},Turn off {0}".format(friendly_name_temp))
			keyboard.append("Turn on all {0}".format(keyboard_type))
			keyboard.append("Turn off all {0}".format(keyboard_type))
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type=="scenes":
			for entity in accessgroup["scenes"]:
				friendly_name_temp = str(self.get_state(entity,"entity_id"))
				keyboard.append("Turn on {}".format(friendly_name_temp))
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type=="rooms":
			for entity in accessgroup["rooms"]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name"))
				keyboard.append(friendly_name_temp)
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type =="room_control":
			functions = ["lights","switches","scenes"]
			for entry in functions:
				keyboard.append("{} {}".format(payload_event["text"],entry))
			keyboard.append("{} Back to Rooms,{} Back to Menu".format(u'\U0001f448',u'\U0001f3e0'))
		elif keyboard_type in KEYBOARD_STRUCTURE.keys():
			keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
			'''for entity in accessgroup['alarm']:
                                                

	                                                    
		                                                                               
		                                                          
		                                                                                                                                                                                                          
		                                                                                    
		                                                           
		                                             
			                                                                                         
			                                                                                                                                                                              	
		     
			                                                                        
		                                                                      
		                                              
			                                  
			                  
			                    

	                                                                
		                                                                
		                     
			                                                       
			                                              
				                           
				                                           
				                    
		                                     
    	
	                                         
		                                   
		                 
			                                   
			                                      
				                           
					                                     
				           
		                                                               

	
	                                                   
		                         
		                                                               
		                     
	                                             
		                  
		                                                               
		                     
	                                            
		                 
		                                                                                                                                                                                      
		                                                               
		                                           		
		                                                     
		                                              
			                                  
			                                                                             
			                    
	                                                     
		                                       
		                                                               
		                                                                                
		                                              
					                                  
					                 
					                            
					                                                                            
		                
		                 
	                                                       
		                                          
		                                                    
		                  
		                                 
			                                                                      
			                                 
				                  
		
		                                            
		             
		                                                                      
		                                   
			                                       
				                                                                      
				                                                                      
		                                                               
		                                                                
		                                                                                              
			
		                                              
					                                  
					                                                                                
					                            
					                    
		                 
	                                                     
		                                          
		                          
			                                            
				                                                      
				                                 
					                                                                      
					                                 
						           
		            
	                                                  
		                                     
		                                              
					                                  
					                                          
					                            
					                                                                      
		                 
	                                             
		                                 
			                                                                      
			                                                                         
			                                             
				           
		            
	                                                        
		            
		             
		                                                           
		                                         
		                                          
		                                            
		                                     
		                                             
		                                    
			                                                        
			                                         
				                          
				             
				                                                 
					                       
				                                                           
			                                                     
				                                 
				                                          
				                                                    
				                  
				                                 
					                                                                      
					                                 
						                  
				                                                                      
				             
				                                   
					                                       
						                             
				                                                           
			      
		                                             
		                                  
			                                        
				                                                                        
				                                     
					                                               
					                                                                
					      
		                                       
		                                                   
				
	                                                                           
		                                              
					                                  
					                                          
					                             
		        
			                                                                 
			                                           
		     
			                                                                  
			                                            
		                 
	                                                                     
		             
		                         
			                              
		                                                                                    
			                                         
				                                                                
				                                                                      
			                                                        
			                                                         
			                                                        
		                             
			                                    
				                                                            
				                                                        
			                                                        
		                            
			                                   
				                                                                
				                                   
			                                                        
		                                    
			                                          
			                       
				                                                            
			                                                                                       
		                                                
			                                                                                          
			  ^
SyntaxError: invalid syntax

2017-10-02 08:25:59.384592 WARNING ------------------------------------------------------------
2017-10-02 08:26:07.222930 WARNING ------------------------------------------------------------
2017-10-02 08:26:07.226839 WARNING Unexpected error during loading of telegram.py:
2017-10-02 08:26:07.231954 WARNING ------------------------------------------------------------
2017-10-02 08:26:07.299091 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 316
    self.printMenu(payload_event,accessgroup)'''

	def alarmFunction(self, payload_event, accessgroup):
		alarm_service = TEXT_TO_SERVICE[ALARM_KEYBOARD_REVERSED[payload_event['text']]]
		self.log("Calling Alarm Service {}".format(alarm_service))
		service_result = self.call_service("alarm_control_panel/{}".format(alarm_service),entity_id = "alarm_control_panel.house", code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
		true_service_result = self.getTrueResult(service_result,"alarm_control_panel.house")
		self.log("Service Result - {}".format(true_service_result))
		if true_service_result['state'] == 'pending':
			message = "Pending due to {}".format(true_service_result['attributes']['trippedsensors'])
			self.handle = self.listen_state(self.armDelayCallback, entity_id = 'alarm_control_panel.house',old = 'pending', chat_id = payload_event['chat_id'], accessgroup = accessgroup)	
		else:
			message = "Alarm *{}*".format(str(true_service_result['state']).upper())
		keyboard = self.getKeyboard(true_service_result['state'], accessgroup)
		self.call_service("telegram_bot/send_message",
			target = payload_event['chat_id'],
			message = message,
			keyboard = keyboard)

	def armDelayCallback(self, entity, attribute, old, new, kwargs):
		self.log("CALLBACK DELAY - {} - {} - {}".format(old,new,kwargs))
		if new != 'disarmed':
			keyboard = self.getKeyboard(new, kwargs['accessgroup'])
			self.call_service("telegram_bot/send_message",
				target = kwargs['chat_id'],
				message = "Alarm *{}*".format(new.upper()),
				keyboard = keyboard)
		self.cancel_listen_event(self.handle)
    	
	def getTrueResult(self, data, entity_id):
		#self.log("DATA - {}".format(data))
		for item in data:
			#self.log("ITEM - {}".format(item))
			if item.get('entity_id') == entity_id:
				if self.handle is not None:
					self.cancel_listen_event(self.handle)
				return item
		return {"state":"already_{}".format(self.get_state(entity_id))}

	
	def sensorStatus(self, payload_event, accessgroup):
		self.log("Sensor Status")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		self.log(alarm_state)
	def bypass(self, payload_event, accessgroup):
		self.log("Bypass")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		self.log(alarm_state)
	def panic(self, payload_event, accessgroup):
		self.log("Panic")
		result = self.call_service("alarm_control_panel/alarm_trigger",entity_id = "alarm_control_panel.house",code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
		result = self.getTrueResult(result,"alarm_control_panel.house")
		self.log("True Result - {}".format(result))		
		keyboard = self.getKeyboard("triggered", accessgroup)
		self.call_service("telegram_bot/send_message",
			target = payload_event['chat_id'],
			message = "{} Alarm *{}*".format(u'\U000026d4',str(result['state']).upper()),
			keyboard = keyboard)
	def alarm_functions(self,payload_event, accessgroup):
		self.log("Serving Alarm Function Menu")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		status = "Current Alarm Status - *{}*".format(str(alarm_state['state']).upper())
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = status,
					disable_notification = True,
					keyboard = self.getKeyboard(alarm_state['state'],accessgroup,payload_event))
		self.log(status)
		self.log("+---}")
	def roomEntityControl(self,payload_event, accessgroup):
		entity = payload_event["text"].split()[-1]
		room_text = payload_event["text"][:-(len(entity)+1)]
		room_object = None
		for room in accessgroup["rooms"]:
			friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
			if friendly_name_temp==room_text:
				room_object = room
		
		self.log("{} - {}".format(entity,room_text))
		keyboard = []
		group_entities = self.get_state(room_object,"attributes")["entity_id"]
		for group_entity in group_entities:
			if group_entity in accessgroup[entity]:
				friendly_name_temp = str(self.get_state(group_entity,"friendly_name"))
				keyboard.append("Turn on {0},Turn off {0}".format(friendly_name_temp))
		keyboard.append("Turn on all {0} {1}".format(room_text,entity))
		keyboard.append("Turn off all {0} {1}".format(room_text,entity))
		keyboard.append("{} Back to {},{} Back to Menu".format(u'\U0001f448',room_text,u'\U0001f3e0'))
			
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Which {} in the {} do you want to control?".format(entity,room_text),
					disable_notification = True,
					keyboard = keyboard)
		self.log("+---}")
	def endsWithEntity(self, payload_event, accessgroup):
		functions = ["lights","switches","scenes"]
		for function in functions:
			if payload_event["text"].endswith(function):
				room_text = payload_event["text"][:-(len(function)+1)]
				for room in accessgroup["rooms"]:
					friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
					if friendly_name_temp==room_text:
						return True
		return False
	def roomControl(self, payload_event, accessgroup):
		self.log("Serving Room Control Menu")
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Which do you want to control?",
					disable_notification = True,
					keyboard = self.getKeyboard("room_control",accessgroup,payload_event))
		self.log("+---}")
	def isRoom(self, payload_event, accessgroup):
		for room in accessgroup["rooms"]:
			friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
			self.log("*{}* =? *{}*".format(payload_event["text"],friendly_name_temp))
			if payload_event["text"]==friendly_name_temp:
				return True
		return False
	def turn_on_off(self, payload_event,accessgroup, *args):
		isOn = False
		isAll = False
		text = (payload_event['text']).replace(" the "," ").lower()
		friendly_name = text[8:].lstrip().lower()
		if text.startswith("turn on"): isOn = True
		self.log("Checking if entity is a light...")
		entity_labels = ["lights","switches"]
		self.log("Entity - {}".format(friendly_name))
		if friendly_name.startswith("all "):
			payload_event['text'] = friendly_name.replace("all ","")
			if(payload_event['text'] in accessgroup):
				self.log("IS A ENTITY!!!")
				entities = []
				for entity in accessgroup[payload_event['text']]:
					entities.append(entity)
				self.entity_turn_on_off(entities,entity,isOn,payload_event)
			elif(self.endsWithEntity(payload_event,accessgroup)):
				self.log("ENDS WITH ROOM ENTITY")
				entity = payload_event["text"].split()[-1]
				room_text = payload_event["text"][:-(len(entity)+1)]
				room_object = None
				for room in accessgroup["rooms"]:
					friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
					if friendly_name_temp==room_text:
						room_object = room
				group_entities = self.get_state(room_object,"attributes")["entity_id"]
				entities = []
				for group_entity in group_entities:
					if group_entity in accessgroup[entity]:
						entities.append(group_entity)
				self.entity_turn_on_off(entities,entity,isOn,payload_event)
			return
		self.log("Entity - {}".format(friendly_name))
		for entity_label in entity_labels:
			for entity in accessgroup[entity_label]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name")).lower()
				if friendly_name==friendly_name_temp:
					self.log("Entity is a {}".format(entity_label))
					self.entity_turn_on_off(entity,friendly_name,isOn,payload_event)
					return
		self.log("Invalid Turn on/off request")
		self.errorMessage(payload_event, "Invalid Request")
				
	def entity_turn_on_off(self, entity_id,friendly_name, isOn, payload_event):
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Done {}".format(u'\U0001f44c'),
					disable_notification = False)
		if isOn:
			self.call_service("homeassistant/turn_on", entity_id = entity_id)
			self.log("Turning on {}".format(entity_id))
		else:
			self.call_service("homeassistant/turn_off", entity_id = entity_id)
			self.log("Turning off {}".format(entity_id))
		self.log("+---}")
	def getKeyboard(self,keyboard_type,accessgroup,payload_event = None):
		keyboard = []
		if keyboard_type=="menu":
			keyboard = accessgroup["menu"]
		elif keyboard_type=="switches" or keyboard_type=="lights" or keyboard_type=="other":
			for entity in accessgroup[keyboard_type]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name"))
				keyboard.append("Turn on {0},Turn off {0}".format(friendly_name_temp))
			keyboard.append("Turn on all {0}".format(keyboard_type))
			keyboard.append("Turn off all {0}".format(keyboard_type))
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type=="scenes":
			for entity in accessgroup["scenes"]:
				friendly_name_temp = str(self.get_state(entity,"entity_id"))
				keyboard.append("Turn on {}".format(friendly_name_temp))
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type=="rooms":
			for entity in accessgroup["rooms"]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name"))
				keyboard.append(friendly_name_temp)
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type =="room_control":
			functions = ["lights","switches","scenes"]
			for entry in functions:
				keyboard.append("{} {}".format(payload_event["text"],entry))
			keyboard.append("{} Back to Rooms,{} Back to Menu".format(u'\U0001f448',u'\U0001f3e0'))
		elif keyboard_type in KEYBOARD_STRUCTURE.keys():
			keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
			'''for entity in accessgroup['alarm']:
                                                

	                                                    
		                                                                               
		                                                          
		                                                                                                                                                                                                          
		                                                                                    
		                                                           
		                                             
			                                                                                         
			                                                                                                                                                                              	
		     
			                                                                        
		                                                                      
		                                              
			                                  
			                  
			                    

	                                                                
		                                                                
		                     
			                                                       
			                                              
				                           
				                                           
				                    
		                                     
    	
	                                         
		                                   
		                 
			                                   
			                                      
				                           
					                                     
				           
		                                                               

	
	                                                   
		                         
		                                                               
		                     
	                                             
		                  
		                                                               
		                     
	                                            
		                 
		                                                                                                                                                                                      
		                                                               
		                                           		
		                                                     
		                                              
			                                  
			                                                                             
			                    
	                                                     
		                                       
		                                                               
		                                                                                
		                                              
					                                  
					                 
					                            
					                                                                            
		                
		                 
	                                                       
		                                          
		                                                    
		                  
		                                 
			                                                                      
			                                 
				                  
		
		                                            
		             
		                                                                      
		                                   
			                                       
				                                                                      
				                                                                      
		                                                               
		                                                                
		                                                                                              
			
		                                              
					                                  
					                                                                                
					                            
					                    
		                 
	                                                     
		                                          
		                          
			                                            
				                                                      
				                                 
					                                                                      
					                                 
						           
		            
	                                                  
		                                     
		                                              
					                                  
					                                          
					                            
					                                                                      
		                 
	                                             
		                                 
			                                                                      
			                                                                         
			                                             
				           
		            
	                                                        
		            
		             
		                                                           
		                                         
		                                          
		                                            
		                                     
		                                             
		                                    
			                                                        
			                                         
				                          
				             
				                                                 
					                       
				                                                           
			                                                     
				                                 
				                                          
				                                                    
				                  
				                                 
					                                                                      
					                                 
						                  
				                                                                      
				             
				                                   
					                                       
						                             
				                                                           
			      
		                                             
		                                  
			                                        
				                                                                        
				                                     
					                                               
					                                                                
					      
		                                       
		                                                   
				
	                                                                           
		                                              
					                                  
					                                          
					                             
		        
			                                                                 
			                                           
		     
			                                                                  
			                                            
		                 
	                                                                     
		             
		                         
			                              
		                                                                                    
			                                         
				                                                                
				                                                                      
			                                                        
			                                                         
			                                                        
		                             
			                                    
				                                                            
				                                                        
			                                                        
		                            
			                                   
				                                                                
				                                   
			                                                        
		                                    
			                                          
			                       
				                                                            
			                                                                                       
		                                                
			                                                                                          
			  ^
SyntaxError: invalid syntax

2017-10-02 08:26:07.306047 WARNING ------------------------------------------------------------
2017-10-02 08:26:28.220547 WARNING ------------------------------------------------------------
2017-10-02 08:26:28.225825 WARNING Unexpected error during loading of telegram.py:
2017-10-02 08:26:28.231664 WARNING ------------------------------------------------------------
2017-10-02 08:26:28.302910 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 316
    self.printMenu(payload_event,accessgroup)'''

	def alarmFunction(self, payload_event, accessgroup):
		alarm_service = TEXT_TO_SERVICE[ALARM_KEYBOARD_REVERSED[payload_event['text']]]
		self.log("Calling Alarm Service {}".format(alarm_service))
		service_result = self.call_service("alarm_control_panel/{}".format(alarm_service),entity_id = "alarm_control_panel.house", code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
		true_service_result = self.getTrueResult(service_result,"alarm_control_panel.house")
		self.log("Service Result - {}".format(true_service_result))
		if true_service_result['state'] == 'pending':
			message = "Pending due to {}".format(true_service_result['attributes']['trippedsensors'])
			self.handle = self.listen_state(self.armDelayCallback, entity_id = 'alarm_control_panel.house',old = 'pending', chat_id = payload_event['chat_id'], accessgroup = accessgroup)	
		else:
			message = "Alarm *{}*".format(str(true_service_result['state']).upper())
		keyboard = self.getKeyboard(true_service_result['state'], accessgroup)
		self.call_service("telegram_bot/send_message",
			target = payload_event['chat_id'],
			message = message,
			keyboard = keyboard)

	def armDelayCallback(self, entity, attribute, old, new, kwargs):
		self.log("CALLBACK DELAY - {} - {} - {}".format(old,new,kwargs))
		if new != 'disarmed':
			keyboard = self.getKeyboard(new, kwargs['accessgroup'])
			self.call_service("telegram_bot/send_message",
				target = kwargs['chat_id'],
				message = "Alarm *{}*".format(new.upper()),
				keyboard = keyboard)
		self.cancel_listen_event(self.handle)
    	
	def getTrueResult(self, data, entity_id):
		#self.log("DATA - {}".format(data))
		for item in data:
			#self.log("ITEM - {}".format(item))
			if item.get('entity_id') == entity_id:
				if self.handle is not None:
					self.cancel_listen_event(self.handle)
				return item
		return {"state":"already_{}".format(self.get_state(entity_id))}

	
	def sensorStatus(self, payload_event, accessgroup):
		self.log("Sensor Status")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		self.log(alarm_state)
	def bypass(self, payload_event, accessgroup):
		self.log("Bypass")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		self.log(alarm_state)
	def panic(self, payload_event, accessgroup):
		self.log("Panic")
		result = self.call_service("alarm_control_panel/alarm_trigger",entity_id = "alarm_control_panel.house",code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
		result = self.getTrueResult(result,"alarm_control_panel.house")
		self.log("True Result - {}".format(result))		
		keyboard = self.getKeyboard("triggered", accessgroup)
		self.call_service("telegram_bot/send_message",
			target = payload_event['chat_id'],
			message = "{} Alarm *{}*".format(u'\U000026d4',str(result['state']).upper()),
			keyboard = keyboard)
	def alarm_functions(self,payload_event, accessgroup):
		self.log("Serving Alarm Function Menu")
		alarm_state = self.get_state("alarm_control_panel.house","all")
		status = "Current Alarm Status - *{}*".format(str(alarm_state['state']).upper())
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = status,
					disable_notification = True,
					keyboard = self.getKeyboard(alarm_state['state'],accessgroup,payload_event))
		self.log(status)
		self.log("+---}")
	def roomEntityControl(self,payload_event, accessgroup):
		entity = payload_event["text"].split()[-1]
		room_text = payload_event["text"][:-(len(entity)+1)]
		room_object = None
		for room in accessgroup["rooms"]:
			friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
			if friendly_name_temp==room_text:
				room_object = room
		
		self.log("{} - {}".format(entity,room_text))
		keyboard = []
		group_entities = self.get_state(room_object,"attributes")["entity_id"]
		for group_entity in group_entities:
			if group_entity in accessgroup[entity]:
				friendly_name_temp = str(self.get_state(group_entity,"friendly_name"))
				keyboard.append("Turn on {0},Turn off {0}".format(friendly_name_temp))
		keyboard.append("Turn on all {0} {1}".format(room_text,entity))
		keyboard.append("Turn off all {0} {1}".format(room_text,entity))
		keyboard.append("{} Back to {},{} Back to Menu".format(u'\U0001f448',room_text,u'\U0001f3e0'))
			
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Which {} in the {} do you want to control?".format(entity,room_text),
					disable_notification = True,
					keyboard = keyboard)
		self.log("+---}")
	def endsWithEntity(self, payload_event, accessgroup):
		functions = ["lights","switches","scenes"]
		for function in functions:
			if payload_event["text"].endswith(function):
				room_text = payload_event["text"][:-(len(function)+1)]
				for room in accessgroup["rooms"]:
					friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
					if friendly_name_temp==room_text:
						return True
		return False
	def roomControl(self, payload_event, accessgroup):
		self.log("Serving Room Control Menu")
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Which do you want to control?",
					disable_notification = True,
					keyboard = self.getKeyboard("room_control",accessgroup,payload_event))
		self.log("+---}")
	def isRoom(self, payload_event, accessgroup):
		for room in accessgroup["rooms"]:
			friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
			self.log("*{}* =? *{}*".format(payload_event["text"],friendly_name_temp))
			if payload_event["text"]==friendly_name_temp:
				return True
		return False
	def turn_on_off(self, payload_event,accessgroup, *args):
		isOn = False
		isAll = False
		text = (payload_event['text']).replace(" the "," ").lower()
		friendly_name = text[8:].lstrip().lower()
		if text.startswith("turn on"): isOn = True
		self.log("Checking if entity is a light...")
		entity_labels = ["lights","switches"]
		self.log("Entity - {}".format(friendly_name))
		if friendly_name.startswith("all "):
			payload_event['text'] = friendly_name.replace("all ","")
			if(payload_event['text'] in accessgroup):
				self.log("IS A ENTITY!!!")
				entities = []
				for entity in accessgroup[payload_event['text']]:
					entities.append(entity)
				self.entity_turn_on_off(entities,entity,isOn,payload_event)
			elif(self.endsWithEntity(payload_event,accessgroup)):
				self.log("ENDS WITH ROOM ENTITY")
				entity = payload_event["text"].split()[-1]
				room_text = payload_event["text"][:-(len(entity)+1)]
				room_object = None
				for room in accessgroup["rooms"]:
					friendly_name_temp = str(self.get_state(room,"friendly_name")).lower()
					if friendly_name_temp==room_text:
						room_object = room
				group_entities = self.get_state(room_object,"attributes")["entity_id"]
				entities = []
				for group_entity in group_entities:
					if group_entity in accessgroup[entity]:
						entities.append(group_entity)
				self.entity_turn_on_off(entities,entity,isOn,payload_event)
			return
		self.log("Entity - {}".format(friendly_name))
		for entity_label in entity_labels:
			for entity in accessgroup[entity_label]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name")).lower()
				if friendly_name==friendly_name_temp:
					self.log("Entity is a {}".format(entity_label))
					self.entity_turn_on_off(entity,friendly_name,isOn,payload_event)
					return
		self.log("Invalid Turn on/off request")
		self.errorMessage(payload_event, "Invalid Request")
				
	def entity_turn_on_off(self, entity_id,friendly_name, isOn, payload_event):
		self.call_service("telegram_bot/send_message",
					target = payload_event['chat_id'],
					message = "Done {}".format(u'\U0001f44c'),
					disable_notification = False)
		if isOn:
			self.call_service("homeassistant/turn_on", entity_id = entity_id)
			self.log("Turning on {}".format(entity_id))
		else:
			self.call_service("homeassistant/turn_off", entity_id = entity_id)
			self.log("Turning off {}".format(entity_id))
		self.log("+---}")
	def getKeyboard(self,keyboard_type,accessgroup,payload_event = None):
		keyboard = []
		if keyboard_type=="menu":
			keyboard = accessgroup["menu"]
		elif keyboard_type=="switches" or keyboard_type=="lights" or keyboard_type=="other":
			for entity in accessgroup[keyboard_type]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name"))
				keyboard.append("Turn on {0},Turn off {0}".format(friendly_name_temp))
			keyboard.append("Turn on all {0}".format(keyboard_type))
			keyboard.append("Turn off all {0}".format(keyboard_type))
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type=="scenes":
			for entity in accessgroup["scenes"]:
				friendly_name_temp = str(self.get_state(entity,"entity_id"))
				keyboard.append("Turn on {}".format(friendly_name_temp))
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type=="rooms":
			for entity in accessgroup["rooms"]:
				friendly_name_temp = str(self.get_state(entity,"friendly_name"))
				keyboard.append(friendly_name_temp)
			keyboard.append("{} Back to Menu".format(u'\U0001f3e0'))
		elif keyboard_type =="room_control":
			functions = ["lights","switches","scenes"]
			for entry in functions:
				keyboard.append("{} {}".format(payload_event["text"],entry))
			keyboard.append("{} Back to Rooms,{} Back to Menu".format(u'\U0001f448',u'\U0001f3e0'))
		elif keyboard_type in KEYBOARD_STRUCTURE.keys():
			keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
			'''for entity in accessgroup['alarm']:
                                                

	                                                    
		                                                                               
		                                                          
		                                                                                                                                                                                                          
		                                                                                    
		                                                           
		                                             
			                                                                                         
			                                                                                                                                                                              	
		     
			                                                                        
		                                                                      
		                                              
			                                  
			                  
			                    

	                                                                
		                                                                
		                     
			                                                       
			                                              
				                           
				                                           
				                    
		                                     
    	
	                                         
		                                   
		                 
			                                   
			                                      
				                           
					                                     
				           
		                                                               

	
	                                                   
		                         
		                                                               
		                     
	                                             
		                  
		                                                               
		                     
	                                            
		                 
		                                                                                                                                                                                      
		                                                               
		                                           		
		                                                     
		                                              
			                                  
			                                                                             
			                    
	                                                     
		                                       
		                                                               
		                                                                                
		                                              
					                                  
					                 
					                            
					                                                                            
		                
		                 
	                                                       
		                                          
		                                                    
		                  
		                                 
			                                                                      
			                                 
				                  
		
		                                            
		             
		                                                                      
		                                   
			                                       
				                                                                      
				                                                                      
		                                                               
		                                                                
		                                                                                              
			
		                                              
					                                  
					                                                                                
					                            
					                    
		                 
	                                                     
		                                          
		                          
			                                            
				                                                      
				                                 
					                                                                      
					                                 
						           
		            
	                                                  
		                                     
		                                              
					                                  
					                                          
					                            
					                                                                      
		                 
	                                             
		                                 
			                                                                      
			                                                                         
			                                             
				           
		            
	                                                        
		            
		             
		                                                           
		                                         
		                                          
		                                            
		                                     
		                                             
		                                    
			                                                        
			                                         
				                          
				             
				                                                 
					                       
				                                                           
			                                                     
				                                 
				                                          
				                                                    
				                  
				                                 
					                                                                      
					                                 
						                  
				                                                                      
				             
				                                   
					                                       
						                             
				                                                           
			      
		                                             
		                                  
			                                        
				                                                                        
				                                     
					                                               
					                                                                
					      
		                                       
		                                                   
				
	                                                                           
		                                              
					                                  
					                                          
					                             
		        
			                                                                 
			                                           
		     
			                                                                  
			                                            
		                 
	                                                                     
		             
		                         
			                              
		                                                                                    
			                                         
				                                                                
				                                                                      
			                                                        
			                                                         
			                                                        
		                             
			                                    
				                                                            
				                                                        
			                                                        
		                            
			                                   
				                                                                
				                                   
			                                                        
		                                    
			                                          
			                       
				                                                            
			                                                                                       
		                                                
			                                                                                          
			  ^
SyntaxError: invalid syntax

2017-10-02 08:26:28.308004 WARNING ------------------------------------------------------------
2017-10-02 08:27:11.365037 WARNING ------------------------------------------------------------
2017-10-02 08:27:11.392911 WARNING Unexpected error in worker for App Telegram:
2017-10-02 08:27:11.397383 WARNING Worker Ags: {'data': {'text': 'Turn off Kitchen', 'from_last': 'Dav', 'chat_id': 444908880, 'user_id': 444908880, 'from_first': 'Ultimate'}, 'id': UUID('8640f922-ae67-4cb2-b9f8-f21d772fa239'), 'type': 'event', 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59e5e70>>, 'kwargs': {}, 'event': 'telegram_text', 'name': 'Telegram'}
2017-10-02 08:27:11.406524 WARNING ------------------------------------------------------------
2017-10-02 08:27:11.428599 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 96, in receive_telegram_text
    simpleFunction = ALARM_KEYBOARD_TO_METHOD[ALARM_KEYBOARD_REVERSED[payload_event['text']]]
KeyError: 'Turn off Kitchen'

2017-10-02 08:27:11.465621 WARNING ------------------------------------------------------------
2017-10-02 08:27:56.082088 WARNING ------------------------------------------------------------
2017-10-02 08:27:56.097878 WARNING Unexpected error in worker for App Telegram:
2017-10-02 08:27:56.113451 WARNING Worker Ags: {'data': {'text': 'Turn off Kitchen', 'from_last': 'Dav', 'chat_id': 444908880, 'user_id': 444908880, 'from_first': 'Ultimate'}, 'id': UUID('9e34b5d0-24f6-4db6-8de6-aa0354995feb'), 'type': 'event', 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59e5cf0>>, 'kwargs': {}, 'event': 'telegram_text', 'name': 'Telegram'}
2017-10-02 08:27:56.123940 WARNING ------------------------------------------------------------
2017-10-02 08:27:56.148574 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 96, in receive_telegram_text
    simpleFunction = ALARM_KEYBOARD_TO_METHOD[ALARM_KEYBOARD_REVERSED[payload_event['text']]]
KeyError: 'Turn off Kitchen'

2017-10-02 08:27:56.203059 WARNING ------------------------------------------------------------
2017-10-02 08:28:39.440668 WARNING ------------------------------------------------------------
2017-10-02 08:28:39.453410 WARNING Unexpected error in worker for App Telegram:
2017-10-02 08:28:39.492596 WARNING Worker Ags: {'data': {'text': 'Turn off Kitchen', 'from_last': 'Dav', 'chat_id': 444908880, 'user_id': 444908880, 'from_first': 'Ultimate'}, 'id': UUID('683d8a75-c3c2-43e6-b0c3-c84628a184ae'), 'type': 'event', 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a541b0>>, 'kwargs': {}, 'event': 'telegram_text', 'name': 'Telegram'}
2017-10-02 08:28:39.510145 WARNING ------------------------------------------------------------
2017-10-02 08:28:39.599813 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 96, in receive_telegram_text
    simpleFunction = ALARM_KEYBOARD_TO_METHOD[ALARM_KEYBOARD_REVERSED[payload_event['text']]]
KeyError: 'Turn off Kitchen'

2017-10-02 08:28:39.641817 WARNING ------------------------------------------------------------
2017-10-02 08:29:19.722981 WARNING ------------------------------------------------------------
2017-10-02 08:29:19.742955 WARNING Unexpected error in worker for App Telegram:
2017-10-02 08:29:19.756080 WARNING Worker Ags: {'data': {'text': 'Turn off Kitchen', 'from_last': 'Dav', 'chat_id': 444908880, 'user_id': 444908880, 'from_first': 'Ultimate'}, 'id': UUID('60bcd39a-eb47-4714-8e0c-5b387225ddc6'), 'type': 'event', 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a3ec30>>, 'kwargs': {}, 'event': 'telegram_text', 'name': 'Telegram'}
2017-10-02 08:29:19.772917 WARNING ------------------------------------------------------------
2017-10-02 08:29:19.809227 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 96, in receive_telegram_text
    simpleFunction = ALARM_KEYBOARD_TO_METHOD[ALARM_KEYBOARD_REVERSED.get(payload_event['text'])]
KeyError: None

2017-10-02 08:29:19.819771 WARNING ------------------------------------------------------------
2017-10-02 21:11:09.289557 WARNING ------------------------------------------------------------
2017-10-02 21:11:09.299338 WARNING Unexpected error during loading of telegram.py:
2017-10-02 21:11:09.307344 WARNING ------------------------------------------------------------
2017-10-02 21:11:09.388372 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-02 21:11:09.396554 WARNING ------------------------------------------------------------
2017-10-02 21:15:21.062113 WARNING ------------------------------------------------------------
2017-10-02 21:15:21.065250 WARNING Unexpected error during loading of telegram:
2017-10-02 21:15:21.068081 WARNING ------------------------------------------------------------
2017-10-02 21:15:21.075843 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 172
    def getMessage
                 ^
SyntaxError: invalid syntax

2017-10-02 21:15:21.078886 WARNING ------------------------------------------------------------
2017-10-02 21:15:21.114043 WARNING ------------------------------------------------------------
2017-10-02 21:15:21.117093 WARNING Unexpected error during loading of Telegram:
2017-10-02 21:15:21.120232 WARNING ------------------------------------------------------------
2017-10-02 21:15:21.125158 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 172
    def getMessage
                 ^
SyntaxError: invalid syntax

2017-10-02 21:15:21.128092 WARNING ------------------------------------------------------------
2017-10-02 21:15:23.060606 WARNING ------------------------------------------------------------
2017-10-02 21:15:23.063646 WARNING Unexpected error during loading of telegram:
2017-10-02 21:15:23.066447 WARNING ------------------------------------------------------------
2017-10-02 21:15:23.074103 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 172
    def getMessage
                 ^
SyntaxError: invalid syntax

2017-10-02 21:15:23.077105 WARNING ------------------------------------------------------------
2017-10-02 21:15:23.119121 WARNING ------------------------------------------------------------
2017-10-02 21:15:23.122269 WARNING Unexpected error during loading of Telegram:
2017-10-02 21:15:23.125077 WARNING ------------------------------------------------------------
2017-10-02 21:15:23.130059 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 172
    def getMessage
                 ^
SyntaxError: invalid syntax

2017-10-02 21:15:23.133010 WARNING ------------------------------------------------------------
2017-10-02 21:16:37.183912 WARNING ------------------------------------------------------------
2017-10-02 21:16:37.190332 WARNING Unexpected error during loading of telegram:
2017-10-02 21:16:37.200313 WARNING ------------------------------------------------------------
2017-10-02 21:16:37.222471 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-02 21:16:37.230208 WARNING ------------------------------------------------------------
2017-10-02 21:16:37.283348 WARNING ------------------------------------------------------------
2017-10-02 21:16:37.300317 WARNING Unexpected error during loading of Telegram:
2017-10-02 21:16:37.303267 WARNING ------------------------------------------------------------
2017-10-02 21:16:37.308123 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-02 21:16:37.342168 WARNING ------------------------------------------------------------
2017-10-02 21:17:12.229640 WARNING ------------------------------------------------------------
2017-10-02 21:17:12.240246 WARNING Unexpected error during loading of telegram:
2017-10-02 21:17:12.264372 WARNING ------------------------------------------------------------
2017-10-02 21:17:12.289066 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-02 21:17:12.307364 WARNING ------------------------------------------------------------
2017-10-02 21:17:12.357239 WARNING ------------------------------------------------------------
2017-10-02 21:17:12.386637 WARNING Unexpected error during loading of Telegram:
2017-10-02 21:17:12.389493 WARNING ------------------------------------------------------------
2017-10-02 21:17:12.404691 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-02 21:17:12.407823 WARNING ------------------------------------------------------------
2017-10-02 21:18:32.922537 WARNING ------------------------------------------------------------
2017-10-02 21:18:32.930380 WARNING Unexpected error in worker for App Alarm:
2017-10-02 21:18:32.981843 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5acb370>>, 'data': {'new_state': {'last_updated': '2017-10-02T19:18:31.626389+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 444908880, 'name': 'Ultimate'}"}, 'last_changed': '2017-10-02T19:18:31.626389+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'pending'}, 'old_state': {'last_updated': '2017-10-02T19:09:58.861678+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': ''}, 'last_changed': '2017-10-02T19:09:58.861678+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('df140a09-14a0-46c7-a2f4-63143091b7b4'), 'event': 'state_changed'}
2017-10-02 21:18:32.984822 WARNING ------------------------------------------------------------
2017-10-02 21:18:33.070650 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
AttributeError: 'NoneType' object has no attribute 'getKeyboard'

2017-10-02 21:18:33.073699 WARNING ------------------------------------------------------------
2017-10-02 21:18:39.675291 WARNING ------------------------------------------------------------
2017-10-02 21:18:39.711087 WARNING Unexpected error in worker for App Alarm:
2017-10-02 21:18:39.731295 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5acb370>>, 'data': {'new_state': {'last_updated': '2017-10-02T19:18:38.429042+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 444908880, 'name': 'Ultimate'}"}, 'last_changed': '2017-10-02T19:18:38.429042+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_away'}, 'old_state': {'last_updated': '2017-10-02T19:18:31.626389+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 444908880, 'name': 'Ultimate'}"}, 'last_changed': '2017-10-02T19:18:31.626389+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'pending'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('df140a09-14a0-46c7-a2f4-63143091b7b4'), 'event': 'state_changed'}
2017-10-02 21:18:39.752156 WARNING ------------------------------------------------------------
2017-10-02 21:18:39.757419 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
AttributeError: 'NoneType' object has no attribute 'getKeyboard'

2017-10-02 21:18:39.788982 WARNING ------------------------------------------------------------
2017-10-03 01:36:47.872186 WARNING ------------------------------------------------------------
2017-10-03 01:36:47.882788 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:36:47.889646 WARNING ------------------------------------------------------------
2017-10-03 01:36:47.905306 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 81
    self.log("GROUP - {}".format(group))
                                       ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:36:47.923827 WARNING ------------------------------------------------------------
2017-10-03 01:37:01.876528 WARNING ------------------------------------------------------------
2017-10-03 01:37:01.885640 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:01.893228 WARNING ------------------------------------------------------------
2017-10-03 01:37:01.908313 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 121
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:01.922598 WARNING ------------------------------------------------------------
2017-10-03 01:37:07.868050 WARNING ------------------------------------------------------------
2017-10-03 01:37:07.881635 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:07.890226 WARNING ------------------------------------------------------------
2017-10-03 01:37:07.903972 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 82
    if(userID in group[1]["chatids"]):
                                     ^
IndentationError: unindent does not match any outer indentation level

2017-10-03 01:37:07.917708 WARNING ------------------------------------------------------------
2017-10-03 01:37:14.920794 WARNING ------------------------------------------------------------
2017-10-03 01:37:14.938273 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:14.942155 WARNING ------------------------------------------------------------
2017-10-03 01:37:14.980706 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 121
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:14.984569 WARNING ------------------------------------------------------------
2017-10-03 01:37:23.873023 WARNING ------------------------------------------------------------
2017-10-03 01:37:23.889285 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:23.892649 WARNING ------------------------------------------------------------
2017-10-03 01:37:23.899188 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 82
    if(userID in group[1]["chatids"]):
                                     ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:23.915290 WARNING ------------------------------------------------------------
2017-10-03 01:37:29.877177 WARNING ------------------------------------------------------------
2017-10-03 01:37:29.887312 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:29.896234 WARNING ------------------------------------------------------------
2017-10-03 01:37:29.911039 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 121
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:29.930246 WARNING ------------------------------------------------------------
2017-10-03 01:37:32.913781 WARNING ------------------------------------------------------------
2017-10-03 01:37:32.923793 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:32.941720 WARNING ------------------------------------------------------------
2017-10-03 01:37:32.947979 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:32.966138 WARNING ------------------------------------------------------------
2017-10-03 01:37:33.980036 WARNING ------------------------------------------------------------
2017-10-03 01:37:33.983947 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:33.992605 WARNING ------------------------------------------------------------
2017-10-03 01:37:34.008771 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:34.031103 WARNING ------------------------------------------------------------
2017-10-03 01:37:48.876975 WARNING ------------------------------------------------------------
2017-10-03 01:37:48.891279 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:48.905327 WARNING ------------------------------------------------------------
2017-10-03 01:37:48.930508 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:48.934394 WARNING ------------------------------------------------------------
2017-10-03 01:37:51.875093 WARNING ------------------------------------------------------------
2017-10-03 01:37:51.896200 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:51.900568 WARNING ------------------------------------------------------------
2017-10-03 01:37:51.921513 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:51.929185 WARNING ------------------------------------------------------------
2017-10-03 01:37:52.898757 WARNING ------------------------------------------------------------
2017-10-03 01:37:52.912265 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:37:52.920876 WARNING ------------------------------------------------------------
2017-10-03 01:37:52.932973 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarm(payload_event, accessgroup):
                                           ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:37:52.950226 WARNING ------------------------------------------------------------
2017-10-03 01:38:07.876925 WARNING ------------------------------------------------------------
2017-10-03 01:38:07.887333 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:38:07.899512 WARNING ------------------------------------------------------------
2017-10-03 01:38:07.907308 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarm(payload_event, accessgroup)
                                          ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 01:38:07.921385 WARNING ------------------------------------------------------------
2017-10-03 01:44:56.959436 WARNING ------------------------------------------------------------
2017-10-03 01:44:56.980243 WARNING Unexpected error in worker for App Telegram:
2017-10-03 01:44:57.186685 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb6a62650>>, 'data': {'user_id': 444908880, 'from_last': 'Dav', 'text': 'Arm Stay', 'from_first': 'Ultimate', 'chat_id': 444908880}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('87b88b07-b533-4162-8ae1-881bfbf0d25a'), 'event': 'telegram_text'}
2017-10-03 01:44:57.189613 WARNING ------------------------------------------------------------
2017-10-03 01:44:57.226411 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 91, in receive_telegram_text
    accessgroup = self.getAccessGroup(payload_event["user_id"],self.args["groups"].items())
  File "/home/homeassistant/conf/apps/telegram.py", line 82, in getAccessGroup
    if(userID in group[1]["chatids"].keys()):
AttributeError: 'list' object has no attribute 'keys'

2017-10-03 01:44:57.250243 WARNING ------------------------------------------------------------
2017-10-03 01:46:41.872561 WARNING ------------------------------------------------------------
2017-10-03 01:46:41.890300 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:46:41.894061 WARNING ------------------------------------------------------------
2017-10-03 01:46:41.911582 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 82
    if(userID in group[1]["chatids"]:
                                    ^
SyntaxError: invalid syntax

2017-10-03 01:46:41.917573 WARNING ------------------------------------------------------------
2017-10-03 01:51:37.869618 WARNING ------------------------------------------------------------
2017-10-03 01:51:37.880276 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:51:37.890222 WARNING ------------------------------------------------------------
2017-10-03 01:51:37.910372 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 83
    if type(chat_id) == dict && userID in chat_id.keys():
                              ^
SyntaxError: invalid syntax

2017-10-03 01:51:37.918109 WARNING ------------------------------------------------------------
2017-10-03 01:52:28.873300 WARNING ------------------------------------------------------------
2017-10-03 01:52:28.882451 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:52:28.891065 WARNING ------------------------------------------------------------
2017-10-03 01:52:28.902705 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 83
    if type(chat_id) == dict and userID in chat_id.keys()
                                                        ^
SyntaxError: invalid syntax

2017-10-03 01:52:28.920246 WARNING ------------------------------------------------------------
2017-10-03 01:59:34.905357 WARNING ------------------------------------------------------------
2017-10-03 01:59:34.929089 WARNING Unexpected error during loading of telegram.py:
2017-10-03 01:59:34.936800 WARNING ------------------------------------------------------------
2017-10-03 01:59:34.953654 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 83
    if (type(chat_id) == dict and userID in chat_id.keys())
                                                           ^
SyntaxError: invalid syntax

2017-10-03 01:59:34.980252 WARNING ------------------------------------------------------------
2017-10-03 02:13:43.877115 WARNING ------------------------------------------------------------
2017-10-03 02:13:43.890973 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:13:43.895406 WARNING ------------------------------------------------------------
2017-10-03 02:13:43.922079 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 120
    self.disarmByCode(payload_event,accessgroup)
                                               ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:13:43.926098 WARNING ------------------------------------------------------------
2017-10-03 02:13:53.879289 WARNING ------------------------------------------------------------
2017-10-03 02:13:53.889542 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:13:53.898760 WARNING ------------------------------------------------------------
2017-10-03 02:13:53.911934 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 140
    for chatid in accessgroup['chatids']:
                                        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:13:53.924085 WARNING ------------------------------------------------------------
2017-10-03 02:14:06.878482 WARNING ------------------------------------------------------------
2017-10-03 02:14:06.890316 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:14:06.897615 WARNING ------------------------------------------------------------
2017-10-03 02:14:06.911327 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 140
    for chatid in accessgroup['chatids']:
                                        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:14:06.923284 WARNING ------------------------------------------------------------
2017-10-03 02:14:15.880660 WARNING ------------------------------------------------------------
2017-10-03 02:14:15.890609 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:14:15.900552 WARNING ------------------------------------------------------------
2017-10-03 02:14:15.909037 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 141
    if chatid.get(chatID):
                         ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:14:15.923317 WARNING ------------------------------------------------------------
2017-10-03 02:15:22.039064 WARNING ------------------------------------------------------------
2017-10-03 02:15:22.050787 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:15:22.060865 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5aeba90>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Arm Stay', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('87d0bd12-f7b6-4c90-9df3-2414c94e1aff'), 'event': 'telegram_text'}
2017-10-03 02:15:22.077846 WARNING ------------------------------------------------------------
2017-10-03 02:15:22.112609 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
AttributeError: 'TelegramBotEventListener' object has no attribute 'disarmByCode'

2017-10-03 02:15:22.134226 WARNING ------------------------------------------------------------
2017-10-03 02:20:36.931080 WARNING ------------------------------------------------------------
2017-10-03 02:20:36.950222 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:20:36.991289 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:20:35.709922+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:20:35.709922+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:15:55.739278+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:15:55.739278+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:20:37.015790 WARNING ------------------------------------------------------------
2017-10-03 02:20:37.121649 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:20:37.140223 WARNING ------------------------------------------------------------
2017-10-03 02:22:30.445773 WARNING ------------------------------------------------------------
2017-10-03 02:22:30.464591 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:22:30.474691 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5ae4d70>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('d0fb44d9-7ed1-422a-b927-e6752e4c0f7d'), 'event': 'telegram_text'}
2017-10-03 02:22:30.500243 WARNING ------------------------------------------------------------
2017-10-03 02:22:30.525608 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
AttributeError: 'TelegramBotEventListener' object has no attribute 'disarmByCode'

2017-10-03 02:22:30.560495 WARNING ------------------------------------------------------------
2017-10-03 02:23:49.061470 WARNING ------------------------------------------------------------
2017-10-03 02:23:49.070229 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:23:49.080798 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a5d5d0>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('38367ba0-a375-4aac-adc0-68b35878cafd'), 'event': 'telegram_text'}
2017-10-03 02:23:49.090275 WARNING ------------------------------------------------------------
2017-10-03 02:23:49.140225 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.disarmbyCode(payload_event,accessgroup)
AttributeError: 'TelegramBotEventListener' object has no attribute 'disarmByCode'

2017-10-03 02:23:49.144171 WARNING ------------------------------------------------------------
2017-10-03 02:24:04.601660 WARNING ------------------------------------------------------------
2017-10-03 02:24:04.615225 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:24:04.631568 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a59a30>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('ed2db71f-1c06-4b93-87d5-7be83661283a'), 'event': 'telegram_text'}
2017-10-03 02:24:04.641087 WARNING ------------------------------------------------------------
2017-10-03 02:24:04.667860 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.getCode(payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 137, in disarmbyCode
    code = self.getCode(payload_event['chat_id'],accessgroup)
TypeError: getCode() takes 2 positional arguments but 3 were given

2017-10-03 02:24:04.692024 WARNING ------------------------------------------------------------
2017-10-03 02:24:35.130424 WARNING ------------------------------------------------------------
2017-10-03 02:24:35.150298 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:24:35.163752 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5acb710>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('0953bca4-40a2-452f-a318-323b3cc36d34'), 'event': 'telegram_text'}
2017-10-03 02:24:35.180469 WARNING ------------------------------------------------------------
2017-10-03 02:24:35.297216 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.disarmbycode(payload_event,accessgroup)
TypeError: getCode() takes 2 positional arguments but 3 were given

2017-10-03 02:24:35.355983 WARNING ------------------------------------------------------------
2017-10-03 02:24:59.127126 WARNING ------------------------------------------------------------
2017-10-03 02:24:59.147735 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:24:59.158204 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59667d0>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('98ad5b2c-97c0-4c45-b314-055eefb40502'), 'event': 'telegram_text'}
2017-10-03 02:24:59.167697 WARNING ------------------------------------------------------------
2017-10-03 02:24:59.247924 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 137, in disarmByCode
    code = self.getCode(payload_event['chat_id'],accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 142, in getCode
    if chatid.get(chatID):
AttributeError: 'str' object has no attribute 'get'

2017-10-03 02:24:59.315388 WARNING ------------------------------------------------------------
2017-10-03 02:25:34.989184 WARNING ------------------------------------------------------------
2017-10-03 02:25:35.016377 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:25:35.031585 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a5d1f0>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('48d160bc-5556-4223-956a-b724db1fdb5e'), 'event': 'telegram_text'}
2017-10-03 02:25:35.040189 WARNING ------------------------------------------------------------
2017-10-03 02:25:35.084443 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 120, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 137, in disarmByCode
    code = self.getCode(payload_event['chat_id'],accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 142, in getCode
    if type(chatid) == str and chatid.get(chatID):
AttributeError: 'str' object has no attribute 'get'

2017-10-03 02:25:35.110254 WARNING ------------------------------------------------------------
2017-10-03 02:25:47.729627 WARNING ------------------------------------------------------------
2017-10-03 02:25:47.741124 WARNING Unexpected error in worker for App Telegram:
2017-10-03 02:25:47.760614 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5959430>>, 'data': {'user_id': 396287366, 'from_last': 'Dav', 'text': 'Disarm', 'from_first': 'Legendary', 'chat_id': 396287366}, 'kwargs': {}, 'type': 'event', 'name': 'Telegram', 'id': UUID('384f27bc-ea2e-4d11-8c08-cbb596b71ae9'), 'event': 'telegram_text'}
2017-10-03 02:25:47.777938 WARNING ------------------------------------------------------------
2017-10-03 02:25:47.823106 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 100, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 123, in alarmFunction
    true_service_result = self.getTrueResult(service_result,"alarm_control_panel.house")
UnboundLocalError: local variable 'service_result' referenced before assignment

2017-10-03 02:25:47.827100 WARNING ------------------------------------------------------------
2017-10-03 02:28:02.902185 WARNING ------------------------------------------------------------
2017-10-03 02:28:02.910234 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:28:02.925154 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:28:01.614526+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:28:01.614526+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:20:35.709922+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:20:35.709922+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:28:02.978502 WARNING ------------------------------------------------------------
2017-10-03 02:28:03.044166 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:28:03.059278 WARNING ------------------------------------------------------------
2017-10-03 02:29:08.000612 WARNING ------------------------------------------------------------
2017-10-03 02:29:08.030216 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:29:08.042972 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:29:06.705610+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:29:06.705610+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:28:01.614526+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:28:01.614526+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:29:08.090228 WARNING ------------------------------------------------------------
2017-10-03 02:29:08.131968 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:29:08.140228 WARNING ------------------------------------------------------------
2017-10-03 02:31:25.871953 WARNING ------------------------------------------------------------
2017-10-03 02:31:25.888632 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:31:25.901274 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:31:24.596403+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:31:24.596403+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:29:06.705610+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:29:06.705610+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:31:25.916505 WARNING ------------------------------------------------------------
2017-10-03 02:31:25.942621 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:31:25.945632 WARNING ------------------------------------------------------------
2017-10-03 02:31:55.241818 WARNING ------------------------------------------------------------
2017-10-03 02:31:55.251019 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:31:55.258931 WARNING ------------------------------------------------------------
2017-10-03 02:31:55.272740 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 334
    return keyboard
         ^
SyntaxError: invalid syntax

2017-10-03 02:31:55.284064 WARNING ------------------------------------------------------------
2017-10-03 02:32:09.553652 WARNING ------------------------------------------------------------
2017-10-03 02:32:09.577951 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:32:09.585151 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:32:08.446665+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:32:08.446665+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:31:24.596403+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:31:24.596403+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:32:09.597463 WARNING ------------------------------------------------------------
2017-10-03 02:32:09.633117 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup.get('alarm'))
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:32:09.660260 WARNING ------------------------------------------------------------
2017-10-03 02:33:46.231082 WARNING ------------------------------------------------------------
2017-10-03 02:33:46.240957 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:33:46.248000 WARNING ------------------------------------------------------------
2017-10-03 02:33:46.263894 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 121
    service_result = self.call_service("alarm_control_panel/{}".format(alarm_service),entity_id = "alarm_control_panel.house", code = {'chat_id':payload_event['chat_id'],'name':payload_event['from_first']})
                 ^
IndentationError: expected an indented block

2017-10-03 02:33:46.275274 WARNING ------------------------------------------------------------
2017-10-03 02:34:40.240410 WARNING ------------------------------------------------------------
2017-10-03 02:34:40.250340 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:34:40.258391 WARNING ------------------------------------------------------------
2017-10-03 02:34:40.273665 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 331
    self.log("KEYBOARD TYPE - {}".format(keyboard_type))
                                                       ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:34:40.295065 WARNING ------------------------------------------------------------
2017-10-03 02:35:06.254678 WARNING ------------------------------------------------------------
2017-10-03 02:35:06.263616 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:35:06.274293 WARNING ------------------------------------------------------------
2017-10-03 02:35:06.283344 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 331
    self.log("KEYBOARD TYPE - {}".format(keyboard_type))
                                                       ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:35:06.303723 WARNING ------------------------------------------------------------
2017-10-03 02:35:19.672265 WARNING ------------------------------------------------------------
2017-10-03 02:35:19.692428 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:35:19.724540 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:35:18.413930+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:35:18.413930+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:32:08.446665+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:32:08.446665+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:35:19.774227 WARNING ------------------------------------------------------------
2017-10-03 02:35:19.864989 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    self.log("KEYBOARD TYPE - {}".format(keyboard_type))
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:35:19.916750 WARNING ------------------------------------------------------------
2017-10-03 02:36:58.413997 WARNING ------------------------------------------------------------
2017-10-03 02:36:58.451467 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:36:58.491761 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:36:56.864462+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:36:56.864462+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:35:18.413930+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:35:18.413930+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:36:58.560240 WARNING ------------------------------------------------------------
2017-10-03 02:36:58.594792 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    elif keyboard_type in KEYBOARD_STRUCTURE.keys():
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:36:58.660243 WARNING ------------------------------------------------------------
2017-10-03 02:39:06.259831 WARNING ------------------------------------------------------------
2017-10-03 02:39:06.272840 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:39:06.294091 WARNING ------------------------------------------------------------
2017-10-03 02:39:06.308888 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 340
    self.log(item)
                 ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 02:39:06.322565 WARNING ------------------------------------------------------------
2017-10-03 02:39:13.242606 WARNING ------------------------------------------------------------
2017-10-03 02:39:13.250297 WARNING Unexpected error during loading of telegram.py:
2017-10-03 02:39:13.262477 WARNING ------------------------------------------------------------
2017-10-03 02:39:13.270458 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 340
    self.log(item)
                 ^
IndentationError: unindent does not match any outer indentation level

2017-10-03 02:39:13.294965 WARNING ------------------------------------------------------------
2017-10-03 02:39:27.200960 WARNING ------------------------------------------------------------
2017-10-03 02:39:27.242290 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:39:27.296854 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:39:26.015416+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:39:26.015416+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:36:56.864462+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:36:56.864462+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:39:27.380245 WARNING ------------------------------------------------------------
2017-10-03 02:39:27.448278 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    elif keyboard_type in KEYBOARD_STRUCTURE.keys():
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:39:27.503127 WARNING ------------------------------------------------------------
2017-10-03 02:40:19.693736 WARNING ------------------------------------------------------------
2017-10-03 02:40:19.719202 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:40:19.770479 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:40:18.432514+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:40:18.432514+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:39:26.015416+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:39:26.015416+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:40:19.775025 WARNING ------------------------------------------------------------
2017-10-03 02:40:19.849616 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    elif keyboard_type in KEYBOARD_STRUCTURE.keys():
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:40:19.858860 WARNING ------------------------------------------------------------
2017-10-03 02:41:18.399283 WARNING ------------------------------------------------------------
2017-10-03 02:41:18.420281 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:41:18.441327 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:41:17.359911+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:41:17.359911+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:40:18.432514+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:40:18.432514+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:41:18.460229 WARNING ------------------------------------------------------------
2017-10-03 02:41:18.497478 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    elif keyboard_type in {"hello":"stupid"}.keys():
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:41:18.527050 WARNING ------------------------------------------------------------
2017-10-03 02:43:25.349639 WARNING ------------------------------------------------------------
2017-10-03 02:43:25.394919 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:43:25.408810 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a59a90>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:43:23.802575+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:43:23.802575+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_away'}, 'old_state': {'last_updated': '2017-10-03T00:41:17.359911+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:41:17.359911+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('98f67910-052b-45c6-86ed-8b95ff69110c'), 'event': 'state_changed'}
2017-10-03 02:43:25.412798 WARNING ------------------------------------------------------------
2017-10-03 02:43:25.437115 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 331, in getKeyboard
    elif keyboard_type in KEYBOARD_STRUCTURE.keys():
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:43:25.450812 WARNING ------------------------------------------------------------
2017-10-03 02:45:14.045673 WARNING ------------------------------------------------------------
2017-10-03 02:45:14.070784 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:45:14.081618 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb59666b0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:45:12.711957+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:45:12.711957+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:43:23.802575+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:43:23.802575+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_away'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('47a38938-554d-4be5-8871-6b97ecb6078b'), 'event': 'state_changed'}
2017-10-03 02:45:14.121109 WARNING ------------------------------------------------------------
2017-10-03 02:45:14.167641 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(chat_id,telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 332, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:45:14.230497 WARNING ------------------------------------------------------------
2017-10-03 02:45:50.874068 WARNING ------------------------------------------------------------
2017-10-03 02:45:50.896985 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:45:50.932415 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb57a68f0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:45:49.497586+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:45:49.497586+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:45:12.711957+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:45:12.711957+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('2e84cff1-3f27-4805-a1e2-e55b8611fd3b'), 'event': 'state_changed'}
2017-10-03 02:45:50.980721 WARNING ------------------------------------------------------------
2017-10-03 02:45:51.033516 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(str(chat_id),telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 332, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:45:51.100451 WARNING ------------------------------------------------------------
2017-10-03 02:47:35.862936 WARNING ------------------------------------------------------------
2017-10-03 02:47:35.881157 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:47:35.893754 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5966590>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:47:34.674299+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:47:34.674299+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:45:49.497586+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:45:49.497586+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('886c2c21-34e6-497c-a90e-a1be0a66733b'), 'event': 'state_changed'}
2017-10-03 02:47:35.962698 WARNING ------------------------------------------------------------
2017-10-03 02:47:36.023363 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(str(chat_id),telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 332, in getKeyboard
    elif keyboard_type in KEYBOARD_STRUCTURE.keys():
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:47:36.061252 WARNING ------------------------------------------------------------
2017-10-03 02:48:50.060383 WARNING ------------------------------------------------------------
2017-10-03 02:48:50.080949 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:48:50.112150 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5966590>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:48:48.664837+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:48:48.664837+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:47:34.674299+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:47:34.674299+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('886c2c21-34e6-497c-a90e-a1be0a66733b'), 'event': 'state_changed'}
2017-10-03 02:48:50.161484 WARNING ------------------------------------------------------------
2017-10-03 02:48:50.229397 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(str(chat_id),telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 332, in getKeyboard
    keyboard.append("{} {}".format(payload_event["text"],entry))
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:48:50.371191 WARNING ------------------------------------------------------------
2017-10-03 02:49:13.701393 WARNING ------------------------------------------------------------
2017-10-03 02:49:13.730504 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:49:13.757360 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5966590>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:49:12.426799+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:49:12.426799+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:48:48.664837+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:48:48.664837+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('886c2c21-34e6-497c-a90e-a1be0a66733b'), 'event': 'state_changed'}
2017-10-03 02:49:13.791324 WARNING ------------------------------------------------------------
2017-10-03 02:49:13.878167 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,self.telegram.getAccessGroup(str(chat_id),telegram_groups))
  File "/home/homeassistant/conf/apps/telegram.py", line 332, in getKeyboard
    for entry in functions:
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:49:13.918045 WARNING ------------------------------------------------------------
2017-10-03 02:50:39.235875 WARNING ------------------------------------------------------------
2017-10-03 02:50:39.321866 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:50:39.361710 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5962eb0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:50:37.544526+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:50:37.544526+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:49:12.426799+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:49:12.426799+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('d5264ba2-cf9a-4afc-a732-056de21aff71'), 'event': 'state_changed'}
2017-10-03 02:50:39.471263 WARNING ------------------------------------------------------------
2017-10-03 02:50:39.576197 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 49, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:50:39.651175 WARNING ------------------------------------------------------------
2017-10-03 02:51:18.499498 WARNING ------------------------------------------------------------
2017-10-03 02:51:18.531020 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:51:18.552270 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a5dd10>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:51:16.976915+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:51:16.976915+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:50:37.544526+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:50:37.544526+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('d86fabb5-1554-43ca-9ded-dbfbc2540fed'), 'event': 'state_changed'}
2017-10-03 02:51:18.590672 WARNING ------------------------------------------------------------
2017-10-03 02:51:18.651418 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 50, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:51:18.690250 WARNING ------------------------------------------------------------
2017-10-03 02:52:59.449859 WARNING ------------------------------------------------------------
2017-10-03 02:52:59.485546 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:52:59.511154 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5aa7eb0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:52:57.744471+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:52:57.744471+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:51:16.976915+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:51:16.976915+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('52e31e14-8776-43d4-ab12-916e36c26be9'), 'event': 'state_changed'}
2017-10-03 02:52:59.560409 WARNING ------------------------------------------------------------
2017-10-03 02:52:59.574356 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 51, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:52:59.588401 WARNING ------------------------------------------------------------
2017-10-03 02:54:52.842336 WARNING ------------------------------------------------------------
2017-10-03 02:54:52.861426 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:54:52.880956 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a24a10>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:54:51.237652+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:54:51.237652+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:53:39.783393+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:53:39.783393+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('107676f1-7da0-4cb6-9d42-c0c3ebef5dfb'), 'event': 'state_changed'}
2017-10-03 02:54:52.900279 WARNING ------------------------------------------------------------
2017-10-03 02:54:52.924519 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 50, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:54:52.940298 WARNING ------------------------------------------------------------
2017-10-03 02:58:20.461220 WARNING ------------------------------------------------------------
2017-10-03 02:58:20.498110 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:58:20.525914 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a247b0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:58:18.974979+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:58:18.974979+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:54:51.237652+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:54:51.237652+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('fb1c0cb9-59aa-43e0-8358-7881cefaf54c'), 'event': 'state_changed'}
2017-10-03 02:58:20.571208 WARNING ------------------------------------------------------------
2017-10-03 02:58:20.646089 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 50, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard.append("{} Back to Rooms,{} Back to Menu".format(u'\U0001f448',u'\U0001f3e0'))
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:58:20.709103 WARNING ------------------------------------------------------------
2017-10-03 02:59:27.452161 WARNING ------------------------------------------------------------
2017-10-03 02:59:27.469611 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:59:27.521356 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a247b0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:59:26.026328+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:59:26.026328+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'old_state': {'last_updated': '2017-10-03T00:58:18.974979+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:58:18.974979+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('fb1c0cb9-59aa-43e0-8358-7881cefaf54c'), 'event': 'state_changed'}
2017-10-03 02:59:27.525452 WARNING ------------------------------------------------------------
2017-10-03 02:59:27.588672 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 50, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard.append("{} Back to Rooms,{} Back to Menu".format(u'\U0001f448',u'\U0001f3e0'))
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:59:27.666813 WARNING ------------------------------------------------------------
2017-10-03 02:59:45.470475 WARNING ------------------------------------------------------------
2017-10-03 02:59:45.491575 WARNING Unexpected error in worker for App Alarm:
2017-10-03 02:59:45.521429 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a247b0>>, 'data': {'new_state': {'last_updated': '2017-10-03T00:59:44.038279+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'immediate': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:59:44.038279+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'disarmed'}, 'old_state': {'last_updated': '2017-10-03T00:59:26.026328+00:00', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'changedby': '', 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}"}, 'last_changed': '2017-10-03T00:59:26.026328+00:00', 'entity_id': 'alarm_control_panel.house', 'state': 'armed_home'}, 'entity_id': 'alarm_control_panel.house'}, 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'type': 'event', 'name': 'Alarm', 'id': UUID('fb1c0cb9-59aa-43e0-8358-7881cefaf54c'), 'event': 'state_changed'}
2017-10-03 02:59:45.570970 WARNING ------------------------------------------------------------
2017-10-03 02:59:45.588978 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 50, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 334, in getKeyboard
    keyboard.append("{} Back to Rooms,{} Back to Menu".format(u'\U0001f448',u'\U0001f3e0'))
TypeError: 'NoneType' object is not subscriptable

2017-10-03 02:59:45.626580 WARNING ------------------------------------------------------------
2017-10-03 03:02:46.675693 WARNING ------------------------------------------------------------
2017-10-03 03:02:46.690797 WARNING Unexpected error during loading of telegram.py:
2017-10-03 03:02:46.702904 WARNING ------------------------------------------------------------
2017-10-03 03:02:46.752628 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:02:46.762122 WARNING ------------------------------------------------------------
2017-10-03 03:02:57.180949 WARNING ------------------------------------------------------------
2017-10-03 03:02:57.199762 WARNING Unexpected error during loading of telegram:
2017-10-03 03:02:57.203595 WARNING ------------------------------------------------------------
2017-10-03 03:02:57.225966 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:02:57.240217 WARNING ------------------------------------------------------------
2017-10-03 03:02:57.306844 WARNING ------------------------------------------------------------
2017-10-03 03:02:57.330704 WARNING Unexpected error during loading of Telegram:
2017-10-03 03:02:57.340956 WARNING ------------------------------------------------------------
2017-10-03 03:02:57.371469 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:02:57.388956 WARNING ------------------------------------------------------------
2017-10-03 03:03:33.177673 WARNING ------------------------------------------------------------
2017-10-03 03:03:33.188674 WARNING Unexpected error during loading of telegram:
2017-10-03 03:03:33.198410 WARNING ------------------------------------------------------------
2017-10-03 03:03:33.225048 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:03:33.232782 WARNING ------------------------------------------------------------
2017-10-03 03:03:33.296219 WARNING ------------------------------------------------------------
2017-10-03 03:03:33.329770 WARNING Unexpected error during loading of Telegram:
2017-10-03 03:03:33.350255 WARNING ------------------------------------------------------------
2017-10-03 03:03:33.369176 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:03:33.373239 WARNING ------------------------------------------------------------
2017-10-03 03:03:50.204348 WARNING ------------------------------------------------------------
2017-10-03 03:03:50.213171 WARNING Unexpected error during loading of telegram:
2017-10-03 03:03:50.223187 WARNING ------------------------------------------------------------
2017-10-03 03:03:50.252123 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armAwayDelay' 	   :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:03:50.260740 WARNING ------------------------------------------------------------
2017-10-03 03:03:50.328539 WARNING ------------------------------------------------------------
2017-10-03 03:03:50.359251 WARNING Unexpected error during loading of Telegram:
2017-10-03 03:03:50.380273 WARNING ------------------------------------------------------------
2017-10-03 03:03:50.411454 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armAwayDelay' 	   :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 03:03:50.420471 WARNING ------------------------------------------------------------
2017-10-03 03:04:10.060896 WARNING ------------------------------------------------------------
2017-10-03 03:04:10.089598 WARNING Unexpected error during loading of telegram:
2017-10-03 03:04:10.098417 WARNING ------------------------------------------------------------
2017-10-03 03:04:10.122423 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:10.125870 WARNING ------------------------------------------------------------
2017-10-03 03:04:10.202218 WARNING ------------------------------------------------------------
2017-10-03 03:04:10.216904 WARNING Unexpected error during loading of Telegram:
2017-10-03 03:04:10.220687 WARNING ------------------------------------------------------------
2017-10-03 03:04:10.242328 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:10.260454 WARNING ------------------------------------------------------------
2017-10-03 03:04:16.131890 WARNING ------------------------------------------------------------
2017-10-03 03:04:16.156169 WARNING Unexpected error during loading of telegram:
2017-10-03 03:04:16.164836 WARNING ------------------------------------------------------------
2017-10-03 03:04:16.184808 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:16.220238 WARNING ------------------------------------------------------------
2017-10-03 03:04:16.268899 WARNING ------------------------------------------------------------
2017-10-03 03:04:16.303385 WARNING Unexpected error during loading of Telegram:
2017-10-03 03:04:16.330210 WARNING ------------------------------------------------------------
2017-10-03 03:04:16.353170 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:16.363260 WARNING ------------------------------------------------------------
2017-10-03 03:04:22.088987 WARNING ------------------------------------------------------------
2017-10-03 03:04:22.121951 WARNING Unexpected error during loading of telegram:
2017-10-03 03:04:22.127016 WARNING ------------------------------------------------------------
2017-10-03 03:04:22.147516 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:22.167471 WARNING ------------------------------------------------------------
2017-10-03 03:04:22.230253 WARNING ------------------------------------------------------------
2017-10-03 03:04:22.240011 WARNING Unexpected error during loading of Telegram:
2017-10-03 03:04:22.248832 WARNING ------------------------------------------------------------
2017-10-03 03:04:22.270804 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:22.288249 WARNING ------------------------------------------------------------
2017-10-03 03:04:53.063182 WARNING ------------------------------------------------------------
2017-10-03 03:04:53.070931 WARNING Unexpected error during loading of telegram.py:
2017-10-03 03:04:53.083147 WARNING ------------------------------------------------------------
2017-10-03 03:04:53.089434 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 22
    ALARM_KEYBOARD_TO_METHOD =
                              ^
SyntaxError: invalid syntax

2017-10-03 03:04:53.104879 WARNING ------------------------------------------------------------
2017-10-03 03:05:20.864928 WARNING ------------------------------------------------------------
2017-10-03 03:05:20.902698 WARNING Unexpected error in worker for App Alarm:
2017-10-03 03:05:20.907602 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a91d30>>, 'id': UUID('6a28f528-a97e-4c24-b942-85366a815fa7'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:05:19.706136+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:05:19.706136+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T00:59:44.038279+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T00:59:44.038279+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 03:05:20.941226 WARNING ------------------------------------------------------------
2017-10-03 03:05:20.969105 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    accessgroup = self.telegram.getAccessGroup(str(chat_id),telegram_groups)
AttributeError: 'NoneType' object has no attribute 'getAccessGroup'

2017-10-03 03:05:21.065714 WARNING ------------------------------------------------------------
2017-10-03 03:10:24.087433 WARNING ------------------------------------------------------------
2017-10-03 03:10:24.123787 WARNING Unexpected error in worker for App Alarm:
2017-10-03 03:10:24.161302 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a723f0>>, 'id': UUID('cebb78b4-5fdd-46f9-b301-187fdd4c1379'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:10:22.949044+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:10:22.949044+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:05:19.706136+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:05:19.706136+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 03:10:24.190239 WARNING ------------------------------------------------------------
2017-10-03 03:10:24.246925 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 46, in telegram_notify
    chat_id = chat_id.keys()[0]
TypeError: 'dict_keys' object does not support indexing

2017-10-03 03:10:24.317300 WARNING ------------------------------------------------------------
2017-10-03 03:11:10.832866 WARNING ------------------------------------------------------------
2017-10-03 03:11:10.861636 WARNING Unexpected error in worker for App Alarm:
2017-10-03 03:11:10.865908 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a72bb0>>, 'id': UUID('349a3781-c601-47ec-bdf7-d776e403fa17'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:11:09.695481+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:11:09.695481+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:10:22.949044+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:10:22.949044+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 03:11:10.915016 WARNING ------------------------------------------------------------
2017-10-03 03:11:10.946107 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 47, in telegram_notify
    chat_id = chat_id.keys()[0]
TypeError: 'dict_keys' object does not support indexing

2017-10-03 03:11:10.990135 WARNING ------------------------------------------------------------
2017-10-03 03:11:29.370389 WARNING ------------------------------------------------------------
2017-10-03 03:11:29.383666 WARNING Unexpected error in worker for App Alarm:
2017-10-03 03:11:29.418497 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a72c50>>, 'id': UUID('2a9a3eb8-2c56-43f8-811c-bc1d68bec4e9'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:11:27.511174+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:11:27.511174+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:11:09.695481+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:11:09.695481+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 03:11:29.422525 WARNING ------------------------------------------------------------
2017-10-03 03:11:29.481324 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 53, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 336, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 03:11:29.500200 WARNING ------------------------------------------------------------
2017-10-03 03:12:17.581374 WARNING ------------------------------------------------------------
2017-10-03 03:12:17.597393 WARNING Unexpected error in worker for App Alarm:
2017-10-03 03:12:17.612215 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a72c70>>, 'id': UUID('c963ae7a-b4d6-4fa3-85e3-1d0403b0f2f6'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:12:15.698729+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:12:15.698729+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:11:27.511174+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:11:27.511174+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 03:12:17.625309 WARNING ------------------------------------------------------------
2017-10-03 03:12:17.656515 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 53, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 336, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 03:12:17.701521 WARNING ------------------------------------------------------------
2017-10-03 03:12:54.910604 WARNING ------------------------------------------------------------
2017-10-03 03:12:54.930372 WARNING Unexpected error in worker for App Alarm:
2017-10-03 03:12:54.941274 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb59964b0>>, 'id': UUID('a5530c79-9fdc-4bd3-9198-f62255dc63fd'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:12:53.179075+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:12:53.179075+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T01:12:15.698729+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': 396287366, 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T01:12:15.698729+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 03:12:55.019233 WARNING ------------------------------------------------------------
2017-10-03 03:12:55.168020 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 53, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 336, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 03:12:55.244748 WARNING ------------------------------------------------------------
2017-10-03 03:32:52.310420 WARNING ------------------------------------------------------------
2017-10-03 03:32:52.320246 WARNING Unexpected error in worker for App Telegram:
2017-10-03 03:32:52.330918 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5999f90>>, 'id': UUID('30a2fba1-09af-44ba-9ecd-f5199b2e02f6'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 03:32:52.340217 WARNING ------------------------------------------------------------
2017-10-03 03:32:52.402335 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 102, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 123, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 139, in disarmByCode
    code = self.getCode(str(payload_event['chat_id']),accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 144, in getCode
    if type(chat_id) == dict:
UnboundLocalError: local variable 'chat_id' referenced before assignment

2017-10-03 03:32:52.409465 WARNING ------------------------------------------------------------
2017-10-03 03:33:13.186069 WARNING ------------------------------------------------------------
2017-10-03 03:33:13.201516 WARNING Unexpected error in worker for App Telegram:
2017-10-03 03:33:13.210787 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb599cd50>>, 'id': UUID('aa2cc7c3-a4cc-41bc-aa2c-98f3f194ab3a'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 03:33:13.219508 WARNING ------------------------------------------------------------
2017-10-03 03:33:13.247795 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 102, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 123, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 139, in disarmByCode
    code = self.getCode(str(payload_event['chat_id']),accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 145, in getCode
    chatid = list(chat_id.keys())[0]
NameError: name 'chat_id' is not defined

2017-10-03 03:33:13.271942 WARNING ------------------------------------------------------------
2017-10-03 03:34:37.067803 WARNING ------------------------------------------------------------
2017-10-03 03:34:37.080288 WARNING Unexpected error during loading of telegram.py:
2017-10-03 03:34:37.083437 WARNING ------------------------------------------------------------
2017-10-03 03:34:37.095625 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 144
    self.log(chatid)
                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 03:34:37.110230 WARNING ------------------------------------------------------------
2017-10-03 03:36:52.680413 WARNING ------------------------------------------------------------
2017-10-03 03:36:52.700633 WARNING Unexpected error in worker for App Telegram:
2017-10-03 03:36:52.710094 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb599f550>>, 'id': UUID('d605e1c3-0f9f-4fbd-bc60-92a529d7c493'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 03:36:52.720227 WARNING ------------------------------------------------------------
2017-10-03 03:36:52.747928 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 102, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 123, in alarmFunction
    self.disarmByCode(payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 139, in disarmByCode
    code = self.getCode(str(payload_event['chat_id']),accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 148, in getCode
    return list(chatid.keys())[1]
IndexError: list index out of range

2017-10-03 03:36:52.781285 WARNING ------------------------------------------------------------
2017-10-03 04:07:36.076348 WARNING ------------------------------------------------------------
2017-10-03 04:07:36.090296 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:07:36.093117 WARNING ------------------------------------------------------------
2017-10-03 04:07:36.098871 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 123
    if !self.disarmByCode(payload_event,accessgroup)
       ^
SyntaxError: invalid syntax

2017-10-03 04:07:36.112090 WARNING ------------------------------------------------------------
2017-10-03 04:10:33.063014 WARNING ------------------------------------------------------------
2017-10-03 04:10:33.070221 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:10:33.080188 WARNING ------------------------------------------------------------
2017-10-03 04:10:33.086151 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 123
    if !self.disarmByCode(payload_event,accessgroup)
       ^
SyntaxError: invalid syntax

2017-10-03 04:10:33.089141 WARNING ------------------------------------------------------------
2017-10-03 04:10:34.063222 WARNING ------------------------------------------------------------
2017-10-03 04:10:34.070207 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:10:34.080213 WARNING ------------------------------------------------------------
2017-10-03 04:10:34.085988 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 123
    if !self.disarmByCode(payload_event,accessgroup)
       ^
SyntaxError: invalid syntax

2017-10-03 04:10:34.088896 WARNING ------------------------------------------------------------
2017-10-03 04:11:22.077068 WARNING ------------------------------------------------------------
2017-10-03 04:11:22.090213 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:11:22.093020 WARNING ------------------------------------------------------------
2017-10-03 04:11:22.098948 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 123
    if not self.disarmByCode(payload_event,accessgroup)
                                                      ^
SyntaxError: invalid syntax

2017-10-03 04:11:22.112247 WARNING ------------------------------------------------------------
2017-10-03 04:20:55.597755 WARNING ------------------------------------------------------------
2017-10-03 04:20:55.610225 WARNING Unexpected error in worker for App Telegram:
2017-10-03 04:20:55.613649 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59a3a70>>, 'id': UUID('9ebd32f3-3c04-4868-9b83-cc6571787913'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 04:20:55.616621 WARNING ------------------------------------------------------------
2017-10-03 04:20:55.645313 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 99, in receive_telegram_text
    if(payload_event['text'].isDigit()):
AttributeError: 'str' object has no attribute 'isDigit'

2017-10-03 04:20:55.670240 WARNING ------------------------------------------------------------
2017-10-03 04:43:34.067679 WARNING ------------------------------------------------------------
2017-10-03 04:43:34.080231 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:43:34.083123 WARNING ------------------------------------------------------------
2017-10-03 04:43:34.089250 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 125
    if not payload_event.get('authenticated')
                                            ^
SyntaxError: invalid syntax

2017-10-03 04:43:34.102507 WARNING ------------------------------------------------------------
2017-10-03 04:43:57.103091 WARNING ------------------------------------------------------------
2017-10-03 04:43:57.110239 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:43:57.120251 WARNING ------------------------------------------------------------
2017-10-03 04:43:57.126399 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:43:57.129342 WARNING ------------------------------------------------------------
2017-10-03 04:44:13.066520 WARNING ------------------------------------------------------------
2017-10-03 04:44:13.080226 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:44:13.083029 WARNING ------------------------------------------------------------
2017-10-03 04:44:13.089155 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:44:13.102642 WARNING ------------------------------------------------------------
2017-10-03 04:44:19.067450 WARNING ------------------------------------------------------------
2017-10-03 04:44:19.080281 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:44:19.083102 WARNING ------------------------------------------------------------
2017-10-03 04:44:19.089144 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:44:19.102374 WARNING ------------------------------------------------------------
2017-10-03 04:44:27.191654 WARNING ------------------------------------------------------------
2017-10-03 04:44:27.220266 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:44:27.223180 WARNING ------------------------------------------------------------
2017-10-03 04:44:27.229408 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:44:27.272739 WARNING ------------------------------------------------------------
2017-10-03 04:44:36.119197 WARNING ------------------------------------------------------------
2017-10-03 04:44:36.130370 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:44:36.133160 WARNING ------------------------------------------------------------
2017-10-03 04:44:36.139249 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:44:36.172528 WARNING ------------------------------------------------------------
2017-10-03 04:44:48.068003 WARNING ------------------------------------------------------------
2017-10-03 04:44:48.080217 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:44:48.083032 WARNING ------------------------------------------------------------
2017-10-03 04:44:48.089167 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:44:48.102433 WARNING ------------------------------------------------------------
2017-10-03 04:44:54.083821 WARNING ------------------------------------------------------------
2017-10-03 04:44:54.090257 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:44:54.100186 WARNING ------------------------------------------------------------
2017-10-03 04:44:54.106398 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:44:54.109294 WARNING ------------------------------------------------------------
2017-10-03 04:45:16.065633 WARNING ------------------------------------------------------------
2017-10-03 04:45:16.080228 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:45:16.083094 WARNING ------------------------------------------------------------
2017-10-03 04:45:16.089318 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:45:16.102728 WARNING ------------------------------------------------------------
2017-10-03 04:45:20.081367 WARNING ------------------------------------------------------------
2017-10-03 04:45:20.090216 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:45:20.093110 WARNING ------------------------------------------------------------
2017-10-03 04:45:20.099425 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:45:20.134327 WARNING ------------------------------------------------------------
2017-10-03 04:45:26.065178 WARNING ------------------------------------------------------------
2017-10-03 04:45:26.080769 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:45:26.083655 WARNING ------------------------------------------------------------
2017-10-03 04:45:26.093334 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:45:26.100261 WARNING ------------------------------------------------------------
2017-10-03 04:51:38.073131 WARNING ------------------------------------------------------------
2017-10-03 04:51:38.080292 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:51:38.090180 WARNING ------------------------------------------------------------
2017-10-03 04:51:38.096331 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    self.alarmFunction(args['payload_event'],args['accessgroup'])
                                                                ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:51:38.099358 WARNING ------------------------------------------------------------
2017-10-03 04:52:01.116554 WARNING ------------------------------------------------------------
2017-10-03 04:52:01.136296 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:52:01.139198 WARNING ------------------------------------------------------------
2017-10-03 04:52:01.153613 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    self.alarmFunction(args['payload_event'],args['accessgroup'])
                                                                ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:52:01.160187 WARNING ------------------------------------------------------------
2017-10-03 04:52:18.068412 WARNING ------------------------------------------------------------
2017-10-03 04:52:18.080219 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:52:18.083055 WARNING ------------------------------------------------------------
2017-10-03 04:52:18.089232 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 156
    self.alarmFunction(args['payload_event'],args['accessgroup'])
                                                                ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:52:18.102525 WARNING ------------------------------------------------------------
2017-10-03 04:54:08.066993 WARNING ------------------------------------------------------------
2017-10-03 04:54:08.080237 WARNING Unexpected error during loading of telegram.py:
2017-10-03 04:54:08.083108 WARNING ------------------------------------------------------------
2017-10-03 04:54:08.089376 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 154
    if args['payload_event']['chat_id'] == payload_event['chat_id']:
                                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 04:54:08.102726 WARNING ------------------------------------------------------------
2017-10-03 05:00:00.954621 WARNING ------------------------------------------------------------
2017-10-03 05:00:00.980265 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:00:00.983620 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb599c490>>, 'id': UUID('cf75e6e9-523f-40c2-8434-21c1df479d03'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:00:00.986479 WARNING ------------------------------------------------------------
2017-10-03 05:00:01.016341 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 127, in alarmFunction
    authenticate(payload_event, accessgroup)
NameError: name 'authenticate' is not defined

2017-10-03 05:00:01.113615 WARNING ------------------------------------------------------------
2017-10-03 05:00:54.899339 WARNING ------------------------------------------------------------
2017-10-03 05:00:54.920271 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:00:54.930617 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb57ab690>>, 'id': UUID('1ee99ed2-2ec7-4cf7-ae0b-d45d2630102b'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:00:54.933498 WARNING ------------------------------------------------------------
2017-10-03 05:00:54.963479 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 127, in alarmFunction
    if payload_event.get('authenticated') is None:
NameError: name 'authenticate' is not defined

2017-10-03 05:00:54.974027 WARNING ------------------------------------------------------------
2017-10-03 05:01:29.580328 WARNING ------------------------------------------------------------
2017-10-03 05:01:29.598378 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:01:29.617511 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a38bf0>>, 'id': UUID('b0d1b523-a5f8-4576-8d2c-e7d583632e25'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:01:29.630612 WARNING ------------------------------------------------------------
2017-10-03 05:01:29.670627 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 127, in alarmFunction
    authenticate(payload_event, accessgroup)
NameError: name 'authenticate' is not defined

2017-10-03 05:01:29.686290 WARNING ------------------------------------------------------------
2017-10-03 05:01:34.998581 WARNING ------------------------------------------------------------
2017-10-03 05:01:35.010231 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:01:35.060758 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a87df0>>, 'id': UUID('5dce08ee-8c29-461f-b203-71cd5b9f2ea0'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:01:35.063646 WARNING ------------------------------------------------------------
2017-10-03 05:01:35.147390 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 127, in alarmFunction
    self.authenticate(payload_event, accessgroup)
NameError: name 'authenticate' is not defined

2017-10-03 05:01:35.170370 WARNING ------------------------------------------------------------
2017-10-03 05:04:15.387996 WARNING ------------------------------------------------------------
2017-10-03 05:04:15.400269 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:04:15.403677 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb46334d0>>, 'id': UUID('06402569-1a6d-46a8-8e31-858365b59ede'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:04:15.406478 WARNING ------------------------------------------------------------
2017-10-03 05:04:15.434052 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 127, in alarmFunction
    self.authenticate(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 150, in authenticate
    self.cancel_listen_event(self.handleIncomingCode)
AttributeError: 'TelegramBotEventListener' object has no attribute 'handleIncomingCode'

2017-10-03 05:04:15.436986 WARNING ------------------------------------------------------------
2017-10-03 05:40:25.206952 WARNING ------------------------------------------------------------
2017-10-03 05:40:25.220976 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:40:25.229903 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb4633710>>, 'id': UUID('265722a6-1481-48dc-8e14-5034e5188ee8'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:40:25.250657 WARNING ------------------------------------------------------------
2017-10-03 05:40:25.265823 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 103, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 126, in alarmFunction
    self.authenticate(payload_event, accessgroup)
KeyError: 'requireCode'

2017-10-03 05:40:25.300243 WARNING ------------------------------------------------------------
2017-10-03 05:41:27.180315 WARNING ------------------------------------------------------------
2017-10-03 05:41:27.200209 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:41:27.203590 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb57fa7b0>>, 'id': UUID('2969015b-8b05-4ac4-98b5-43daec0df210'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:41:27.206441 WARNING ------------------------------------------------------------
2017-10-03 05:41:27.236354 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 103, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in alarmFunction
    service_result = self.call_service("alarm_control_panel/{}".format(alarm_service),entity_id = "alarm_control_panel.house", code = {'chat_id':chatid,'name':payload_event['from_first']})
KeyError: 'requireCode'

2017-10-03 05:41:27.239295 WARNING ------------------------------------------------------------
2017-10-03 05:41:42.230253 WARNING ------------------------------------------------------------
2017-10-03 05:41:42.240213 WARNING Unexpected error in worker for App Telegram:
2017-10-03 05:41:42.243557 WARNING Worker Ags: {'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb57fa7b0>>, 'id': UUID('2969015b-8b05-4ac4-98b5-43daec0df210'), 'name': 'Telegram', 'event': 'telegram_text', 'data': {'from_last': 'Dav', 'from_first': 'Legendary', 'text': 'Disarm', 'chat_id': 396287366, 'user_id': 396287366}, 'type': 'event', 'kwargs': {}}
2017-10-03 05:41:42.246399 WARNING ------------------------------------------------------------
2017-10-03 05:41:42.271464 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 103, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in alarmFunction
    service_result = self.call_service("alarm_control_panel/{}".format(alarm_service),entity_id = "alarm_control_panel.house", code = {'chat_id':chatid,'name':payload_event['from_first']})
KeyError: 'requireCode'

2017-10-03 05:41:42.274369 WARNING ------------------------------------------------------------
2017-10-03 05:42:33.731185 WARNING ------------------------------------------------------------
2017-10-03 05:42:33.740208 WARNING Unexpected error in worker for App Alarm:
2017-10-03 05:42:33.744025 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb57fa530>>, 'id': UUID('ad31b378-7a2b-40a4-804d-04f0798db022'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T03:42:32.717631+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': '396287366', 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T03:42:32.717631+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T03:20:12.213118+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': '396287366', 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T03:20:12.213118+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 05:42:33.747012 WARNING ------------------------------------------------------------
2017-10-03 05:42:33.806703 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 49, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 324, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm']['functions'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 05:42:33.820193 WARNING ------------------------------------------------------------
2017-10-03 05:43:08.750590 WARNING ------------------------------------------------------------
2017-10-03 05:43:08.781156 WARNING Unexpected error in worker for App Alarm:
2017-10-03 05:43:08.791251 WARNING Worker Ags: {'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb57ab5d0>>, 'id': UUID('639f6999-ef81-455a-b6ca-495129e336fa'), 'name': 'Alarm', 'event': 'state_changed', 'data': {'entity_id': 'alarm_control_panel.house', 'new_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T03:43:07.667842+00:00', 'state': 'armed_home', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'trippedsensors': [], 'triggeredBy': "{'chat_id': '396287366', 'name': 'Legendary'}", 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'friendly_name': 'House', 'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T03:43:07.667842+00:00'}, 'old_state': {'entity_id': 'alarm_control_panel.house', 'last_updated': '2017-10-03T03:42:32.717631+00:00', 'state': 'disarmed', 'attributes': {'changed_by': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'trippedsensors': [], 'triggeredBy': "{'chat_id': '396287366', 'name': 'Legendary'}", 'immediate': [], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': ''}, 'last_changed': '2017-10-03T03:42:32.717631+00:00'}}, 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 05:43:08.798753 WARNING ------------------------------------------------------------
2017-10-03 05:43:08.863131 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 49, in telegram_notify
    keyboard = self.telegram.getKeyboard(new_state,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 324, in getKeyboard
    keyboard = self.getRefinedKeyboard(KEYBOARD_STRUCTURE[keyboard_type],accessgroup['alarm']['functions'])
TypeError: 'NoneType' object is not subscriptable

2017-10-03 05:43:08.878541 WARNING ------------------------------------------------------------
2017-10-03 05:44:15.165776 WARNING ------------------------------------------------------------
2017-10-03 05:44:15.186534 WARNING Unexpected error during loading of telegram.py:
2017-10-03 05:44:15.189492 WARNING ------------------------------------------------------------
2017-10-03 05:44:15.228514 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 05:44:15.243815 WARNING ------------------------------------------------------------
2017-10-03 05:44:31.190195 WARNING ------------------------------------------------------------
2017-10-03 05:44:31.200230 WARNING Unexpected error during loading of telegram:
2017-10-03 05:44:31.203183 WARNING ------------------------------------------------------------
2017-10-03 05:44:31.224969 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 05:44:31.235326 WARNING ------------------------------------------------------------
2017-10-03 05:44:31.312555 WARNING ------------------------------------------------------------
2017-10-03 05:44:31.330218 WARNING Unexpected error during loading of Telegram:
2017-10-03 05:44:31.333107 WARNING ------------------------------------------------------------
2017-10-03 05:44:31.337910 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 05:44:31.371242 WARNING ------------------------------------------------------------
2017-10-03 05:44:42.173157 WARNING ------------------------------------------------------------
2017-10-03 05:44:42.182103 WARNING Unexpected error during loading of telegram:
2017-10-03 05:44:42.191670 WARNING ------------------------------------------------------------
2017-10-03 05:44:42.213872 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 05:44:42.220188 WARNING ------------------------------------------------------------
2017-10-03 05:44:42.273398 WARNING ------------------------------------------------------------
2017-10-03 05:44:42.290198 WARNING Unexpected error during loading of Telegram:
2017-10-03 05:44:42.293145 WARNING ------------------------------------------------------------
2017-10-03 05:44:42.297970 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 23, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 05:44:42.320892 WARNING ------------------------------------------------------------
2017-10-03 05:45:11.443835 WARNING ------------------------------------------------------------
2017-10-03 05:45:11.461652 WARNING Unexpected error in worker for App Alarm:
2017-10-03 05:45:11.477011 WARNING Worker Ags: {'event': 'state_changed', 'data': {'old_state': {'last_changed': '2017-10-03T03:43:07.667842+00:00', 'state': 'armed_home', 'last_updated': '2017-10-03T03:43:07.667842+00:00', 'attributes': {'ignored': ['binary_sensor.motion_sensor_158d00016dcfa8'], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'changed_by': '', 'delayed': ['binary_sensor.switch_158d000186e9bd'], 'changedby': '', 'immediate': ['binary_sensor.door_window_sensor_158d000187120a'], 'triggeredBy': "{'chat_id': '396287366', 'name': 'Legendary'}", 'trippedsensors': [], 'code_format': None, 'friendly_name': 'House'}, 'entity_id': 'alarm_control_panel.house'}, 'new_state': {'last_changed': '2017-10-03T03:45:10.481877+00:00', 'state': 'disarmed', 'last_updated': '2017-10-03T03:45:10.481877+00:00', 'attributes': {'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'changed_by': '', 'delayed': [], 'changedby': '', 'immediate': [], 'triggeredBy': "{'chat_id': '396287366', 'name': 'Legendary'}", 'trippedsensors': [], 'code_format': None, 'friendly_name': 'House'}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house'}, 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'id': UUID('320a1922-63af-4fc4-b4f8-05fd02ce0014'), 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5aa75d0>>}
2017-10-03 05:45:11.490715 WARNING ------------------------------------------------------------
2017-10-03 05:45:11.513784 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    accessgroup = self.telegram.getAccessGroup(str(chat_id),telegram_groups)
AttributeError: 'NoneType' object has no attribute 'getAccessGroup'

2017-10-03 05:45:11.522873 WARNING ------------------------------------------------------------
2017-10-03 14:07:41.060966 WARNING ------------------------------------------------------------
2017-10-03 14:07:41.070216 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:07:41.073375 WARNING ------------------------------------------------------------
2017-10-03 14:07:41.079612 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    for key, value in d.items():
                               ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:07:41.102876 WARNING ------------------------------------------------------------
2017-10-03 14:08:06.061981 WARNING ------------------------------------------------------------
2017-10-03 14:08:06.070215 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:08:06.080830 WARNING ------------------------------------------------------------
2017-10-03 14:08:06.086907 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    for key, value in d.items():
                               ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:08:06.099979 WARNING ------------------------------------------------------------
2017-10-03 14:08:17.083861 WARNING ------------------------------------------------------------
2017-10-03 14:08:17.103643 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:08:17.108886 WARNING ------------------------------------------------------------
2017-10-03 14:08:17.115114 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    for key, value in d.items():
                               ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:08:17.118046 WARNING ------------------------------------------------------------
2017-10-03 14:08:18.284291 WARNING ------------------------------------------------------------
2017-10-03 14:08:18.342264 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:08:18.345035 WARNING ------------------------------------------------------------
2017-10-03 14:08:18.376607 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    for key, value in d.items():
                               ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:08:18.440215 WARNING ------------------------------------------------------------
2017-10-03 14:08:20.254593 WARNING ------------------------------------------------------------
2017-10-03 14:08:20.280209 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:08:20.283126 WARNING ------------------------------------------------------------
2017-10-03 14:08:20.289215 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    for key, value in d.items():
                               ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:08:20.317791 WARNING ------------------------------------------------------------
2017-10-03 14:09:03.992984 WARNING ------------------------------------------------------------
2017-10-03 14:09:04.060305 WARNING Unexpected error in worker for App Telegram:
2017-10-03 14:09:04.095386 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Disarm', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('03c53e99-c09e-47a1-8fdb-5d63e23fdb32'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb570eef0>>}
2017-10-03 14:09:04.098449 WARNING ------------------------------------------------------------
2017-10-03 14:09:04.132129 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 103, in receive_telegram_text
    self.log(self.pretty(self.get_state('binary_sensor')))
  File "/home/homeassistant/conf/apps/telegram.py", line 92, in pretty
    for key, value in d.items():
AttributeError: 'TelegramBotEventListener' object has no attribute 'items'

2017-10-03 14:09:04.140205 WARNING ------------------------------------------------------------
2017-10-03 14:11:15.707317 WARNING ------------------------------------------------------------
2017-10-03 14:11:15.730229 WARNING Unexpected error in worker for App Telegram:
2017-10-03 14:11:15.733648 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Disarm', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('577fec59-63a3-4a7e-94d1-7e99736b6947'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59ec1f0>>}
2017-10-03 14:11:15.736485 WARNING ------------------------------------------------------------
2017-10-03 14:11:15.782992 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    self.log(self.pretty(self.get_state('binary_sensor')))
  File "/home/homeassistant/conf/apps/telegram.py", line 92, in pretty
    self.log("{} - {}".format(d,type(d)))
NameError: name 'self' is not defined

2017-10-03 14:11:15.810190 WARNING ------------------------------------------------------------
2017-10-03 14:11:34.640888 WARNING ------------------------------------------------------------
2017-10-03 14:11:34.650702 WARNING Unexpected error in worker for App Telegram:
2017-10-03 14:11:34.654073 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Disarm', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('76ec4027-fd18-4a82-96da-c4baca9e89aa'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a3a9d0>>}
2017-10-03 14:11:34.657069 WARNING ------------------------------------------------------------
2017-10-03 14:11:34.723673 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    self.log(self.pretty(self.get_state('binary_sensor')))
  File "/home/homeassistant/conf/apps/telegram.py", line 96, in pretty
    pretty(value, indent+1)
NameError: name 'pretty' is not defined

2017-10-03 14:11:34.726673 WARNING ------------------------------------------------------------
2017-10-03 14:12:13.061930 WARNING ------------------------------------------------------------
2017-10-03 14:12:13.070212 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:12:13.080270 WARNING ------------------------------------------------------------
2017-10-03 14:12:13.086452 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    self.log("{} - {}".format(d,type(d)))
                                        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:12:13.089430 WARNING ------------------------------------------------------------
2017-10-03 14:12:26.059148 WARNING ------------------------------------------------------------
2017-10-03 14:12:26.070227 WARNING Unexpected error during loading of telegram.py:
2017-10-03 14:12:26.073476 WARNING ------------------------------------------------------------
2017-10-03 14:12:26.079510 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 92
    self.log("{} - {}".format(d,type(d)))
                                        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-03 14:12:26.102741 WARNING ------------------------------------------------------------
2017-10-03 14:12:36.331305 WARNING ------------------------------------------------------------
2017-10-03 14:12:36.340219 WARNING Unexpected error in worker for App Telegram:
2017-10-03 14:12:36.343596 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Disarm', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('5209a052-e946-4738-812c-063c3608592a'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a72e70>>}
2017-10-03 14:12:36.346489 WARNING ------------------------------------------------------------
2017-10-03 14:12:36.391462 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 104, in receive_telegram_text
    self.log(self.pretty(self.get_state('binary_sensor')))
  File "/home/homeassistant/conf/apps/telegram.py", line 96, in pretty
    pretty(value, indent+1)
NameError: name 'pretty' is not defined

2017-10-03 14:12:36.400193 WARNING ------------------------------------------------------------
2017-10-03 15:31:23.234521 WARNING ------------------------------------------------------------
2017-10-03 15:31:23.254064 WARNING Unexpected error in worker for App Telegram:
2017-10-03 15:31:23.257843 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Sensor Overview', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('2474366b-e26f-4d36-b847-f892fd2f7fd6'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5abcd30>>}
2017-10-03 15:31:23.283269 WARNING ------------------------------------------------------------
2017-10-03 15:31:23.336562 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 175, in sensorStatus
    self.log(alarm_sensor_states['attributes']['allsensors'])
KeyError: 'attributes'

2017-10-03 15:31:23.339526 WARNING ------------------------------------------------------------
2017-10-03 15:32:42.593847 WARNING ------------------------------------------------------------
2017-10-03 15:32:42.610581 WARNING Unexpected error in worker for App Telegram:
2017-10-03 15:32:42.630791 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Sensor Overview', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('32e2198a-a3c2-421f-8143-f2508c285c01'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59f3170>>}
2017-10-03 15:32:42.633677 WARNING ------------------------------------------------------------
2017-10-03 15:32:42.663578 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 175, in sensorStatus
    self.log(alarm_sensor_state)
NameError: name 'alarm_sensor_state' is not defined

2017-10-03 15:32:42.725231 WARNING ------------------------------------------------------------
2017-10-03 15:33:56.341880 WARNING ------------------------------------------------------------
2017-10-03 15:33:56.366446 WARNING Unexpected error in worker for App Telegram:
2017-10-03 15:33:56.369958 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Sensor Overview', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('951e3563-cfb0-4f07-9a88-2996e1b4d9f0'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5740cf0>>}
2017-10-03 15:33:56.372826 WARNING ------------------------------------------------------------
2017-10-03 15:33:56.402750 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 175, in sensorStatus
    self.log(alarm_sensor_state)
NameError: name 'alarm_sensor_state' is not defined

2017-10-03 15:33:56.416986 WARNING ------------------------------------------------------------
2017-10-03 15:34:04.132428 WARNING ------------------------------------------------------------
2017-10-03 15:34:04.150305 WARNING Unexpected error in worker for App Telegram:
2017-10-03 15:34:04.153705 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Sensor Overview', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('2a09ab72-8811-4763-87d1-75136d085b93'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5740ad0>>}
2017-10-03 15:34:04.156513 WARNING ------------------------------------------------------------
2017-10-03 15:34:04.186527 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 175, in sensorStatus
    self.log(alarm_sensor_state)
NameError: name 'alarm_sensor_state' is not defined

2017-10-03 15:34:04.208570 WARNING ------------------------------------------------------------
2017-10-03 15:38:04.386825 WARNING ------------------------------------------------------------
2017-10-03 15:38:04.403624 WARNING Unexpected error in worker for App Telegram:
2017-10-03 15:38:04.407107 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Sensor Overview', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('caf4edbf-ae92-483d-b863-c8a2a53b3852'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb575cb90>>}
2017-10-03 15:38:04.440468 WARNING ------------------------------------------------------------
2017-10-03 15:38:04.501148 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 176, in sensorStatus
    self.log(all_sensor_states.keys())
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 127, in log
    msg = self._sub_stack(msg)
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 105, in _sub_stack
    msg = json.dumps(msg)
  File "/usr/lib/python3.4/json/__init__.py", line 230, in dumps
    return _default_encoder.encode(obj)
  File "/usr/lib/python3.4/json/encoder.py", line 192, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.4/json/encoder.py", line 250, in iterencode
    return _iterencode(o, 0)
  File "/usr/lib/python3.4/json/encoder.py", line 173, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: dict_keys(['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd']) is not JSON serializable

2017-10-03 15:38:04.519309 WARNING ------------------------------------------------------------
2017-10-03 15:38:43.044320 WARNING ------------------------------------------------------------
2017-10-03 15:38:43.062466 WARNING Unexpected error in worker for App Telegram:
2017-10-03 15:38:43.065992 WARNING Worker Ags: {'event': 'telegram_text', 'data': {'text': 'Sensor Overview', 'from_last': 'Dav', 'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary'}, 'name': 'Telegram', 'type': 'event', 'kwargs': {}, 'id': UUID('891d6e82-72bd-4308-97fe-834b2eac1342'), 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5750490>>}
2017-10-03 15:38:43.068873 WARNING ------------------------------------------------------------
2017-10-03 15:38:43.121499 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 176, in sensorStatus
    self.log(list(all_sensor_states.keys()))
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 127, in log
    msg = self._sub_stack(msg)
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 105, in _sub_stack
    msg = json.dumps(msg)
  File "/usr/lib/python3.4/json/__init__.py", line 230, in dumps
    return _default_encoder.encode(obj)
  File "/usr/lib/python3.4/json/encoder.py", line 192, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.4/json/encoder.py", line 250, in iterencode
    return _iterencode(o, 0)
  File "/usr/lib/python3.4/json/encoder.py", line 173, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: dict_keys(['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd']) is not JSON serializable

2017-10-03 15:38:43.124512 WARNING ------------------------------------------------------------
2017-10-03 16:25:52.699796 WARNING ------------------------------------------------------------
2017-10-03 16:25:52.710316 WARNING Unexpected error during loading of telegram.py:
2017-10-03 16:25:52.713190 WARNING ------------------------------------------------------------
2017-10-03 16:25:52.777947 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:25:52.782428 WARNING ------------------------------------------------------------
2017-10-03 16:29:45.109605 WARNING ------------------------------------------------------------
2017-10-03 16:29:45.150209 WARNING Unexpected error during loading of telegram.py:
2017-10-03 16:29:45.153085 WARNING ------------------------------------------------------------
2017-10-03 16:29:45.213344 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:29:45.216539 WARNING ------------------------------------------------------------
2017-10-03 16:34:23.559852 WARNING ------------------------------------------------------------
2017-10-03 16:34:23.573787 WARNING Unexpected error during loading of telegram:
2017-10-03 16:34:23.589918 WARNING ------------------------------------------------------------
2017-10-03 16:34:23.612530 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:34:23.615554 WARNING ------------------------------------------------------------
2017-10-03 16:34:23.683296 WARNING ------------------------------------------------------------
2017-10-03 16:34:23.686265 WARNING Unexpected error during loading of Telegram:
2017-10-03 16:34:23.689046 WARNING ------------------------------------------------------------
2017-10-03 16:34:23.714656 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:34:23.717604 WARNING ------------------------------------------------------------
2017-10-03 16:35:33.033127 WARNING ------------------------------------------------------------
2017-10-03 16:35:33.050259 WARNING Unexpected error in worker for App Alarm:
2017-10-03 16:35:33.081341 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T14:35:31.987588+00:00', 'state': 'pending', 'last_changed': '2017-10-03T14:35:31.987588+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.switch_158d000186e9bd'], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T14:33:05.562101+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T14:33:05.562101+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': '', 'code_format': None, 'immediate': [], 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b09fd0>>, 'event': 'state_changed', 'id': UUID('c53d489f-03f0-4c76-8057-c6f6b7cb4bf8'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 16:35:33.084453 WARNING ------------------------------------------------------------
2017-10-03 16:35:33.117429 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    accessgroup = self.telegram.getAccessGroup(str(chat_id),telegram_groups)
AttributeError: 'NoneType' object has no attribute 'getAccessGroup'

2017-10-03 16:35:33.139615 WARNING ------------------------------------------------------------
2017-10-03 16:35:48.030737 WARNING ------------------------------------------------------------
2017-10-03 16:35:48.050251 WARNING Unexpected error in worker for App Alarm:
2017-10-03 16:35:48.062090 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T14:35:47.375542+00:00', 'state': 'armed_away', 'last_changed': '2017-10-03T14:35:47.375542+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': 'None', 'code_format': None, 'immediate': [], 'trippedsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.switch_158d000186e9bd'], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T14:35:31.987588+00:00', 'state': 'pending', 'last_changed': '2017-10-03T14:35:31.987588+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.switch_158d000186e9bd'], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b09fd0>>, 'event': 'state_changed', 'id': UUID('c53d489f-03f0-4c76-8057-c6f6b7cb4bf8'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 16:35:48.065269 WARNING ------------------------------------------------------------
2017-10-03 16:35:48.137946 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/conf/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-03 16:35:48.151273 WARNING ------------------------------------------------------------
2017-10-03 16:36:25.910736 WARNING ------------------------------------------------------------
2017-10-03 16:36:25.948960 WARNING Unexpected error in worker for App Alarm:
2017-10-03 16:36:25.959239 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T14:36:24.838617+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T14:36:24.838617+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T14:35:47.375542+00:00', 'state': 'armed_away', 'last_changed': '2017-10-03T14:35:47.375542+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': 'None', 'code_format': None, 'immediate': [], 'trippedsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.switch_158d000186e9bd'], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b09fd0>>, 'event': 'state_changed', 'id': UUID('c53d489f-03f0-4c76-8057-c6f6b7cb4bf8'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 16:36:25.962392 WARNING ------------------------------------------------------------
2017-10-03 16:36:25.967713 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    accessgroup = self.telegram.getAccessGroup(str(chat_id),telegram_groups)
AttributeError: 'NoneType' object has no attribute 'getAccessGroup'

2017-10-03 16:36:26.006643 WARNING ------------------------------------------------------------
2017-10-03 16:36:51.189585 WARNING ------------------------------------------------------------
2017-10-03 16:36:51.212958 WARNING Unexpected error in worker for App Alarm:
2017-10-03 16:36:51.216878 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T14:36:50.453302+00:00', 'state': 'triggered', 'last_changed': '2017-10-03T14:36:50.453302+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T14:36:24.838617+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T14:36:24.838617+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b09fd0>>, 'event': 'state_changed', 'id': UUID('c53d489f-03f0-4c76-8057-c6f6b7cb4bf8'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 16:36:51.240408 WARNING ------------------------------------------------------------
2017-10-03 16:36:51.272668 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/conf/apps/alarm.py", line 33, in getTriggeredBy
    triggered_by = {'name': self.friendly_name(data['new_state']['attributes']['changedby'])}
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 141, in friendly_name
    self._check_entity(entity_id)
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 95, in _check_entity
    "{}: Invalid entity ID: {}".format(self.name, entity))
ValueError: Alarm: Invalid entity ID: 

2017-10-03 16:36:51.300191 WARNING ------------------------------------------------------------
2017-10-03 16:37:51.699771 WARNING ------------------------------------------------------------
2017-10-03 16:37:51.720483 WARNING Unexpected error in worker for App Alarm:
2017-10-03 16:37:51.724350 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T14:37:51.230788+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T14:37:51.230788+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T14:36:50.453302+00:00', 'state': 'triggered', 'last_changed': '2017-10-03T14:36:50.453302+00:00', 'attributes': {'delayed': [], 'friendly_name': 'House', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': None, 'code_format': None, 'immediate': [], 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b09fd0>>, 'event': 'state_changed', 'id': UUID('c53d489f-03f0-4c76-8057-c6f6b7cb4bf8'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 16:37:51.747435 WARNING ------------------------------------------------------------
2017-10-03 16:37:51.753038 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    accessgroup = self.telegram.getAccessGroup(str(chat_id),telegram_groups)
AttributeError: 'NoneType' object has no attribute 'getAccessGroup'

2017-10-03 16:37:51.755965 WARNING ------------------------------------------------------------
2017-10-03 16:42:30.517852 WARNING ------------------------------------------------------------
2017-10-03 16:42:30.561110 WARNING Unexpected error during loading of telegram:
2017-10-03 16:42:30.563977 WARNING ------------------------------------------------------------
2017-10-03 16:42:30.621454 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:42:30.624508 WARNING ------------------------------------------------------------
2017-10-03 16:42:30.722547 WARNING ------------------------------------------------------------
2017-10-03 16:42:30.785264 WARNING Unexpected error during loading of Telegram:
2017-10-03 16:42:30.788113 WARNING ------------------------------------------------------------
2017-10-03 16:42:30.803299 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:42:30.833301 WARNING ------------------------------------------------------------
2017-10-03 16:47:09.933717 WARNING ------------------------------------------------------------
2017-10-03 16:47:09.959378 WARNING Unexpected error during loading of telegram:
2017-10-03 16:47:09.967734 WARNING ------------------------------------------------------------
2017-10-03 16:47:09.994025 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:47:10.010307 WARNING ------------------------------------------------------------
2017-10-03 16:47:10.083323 WARNING ------------------------------------------------------------
2017-10-03 16:47:10.120230 WARNING Unexpected error during loading of Telegram:
2017-10-03 16:47:10.123113 WARNING ------------------------------------------------------------
2017-10-03 16:47:10.127979 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:47:10.151948 WARNING ------------------------------------------------------------
2017-10-03 16:48:41.869555 WARNING ------------------------------------------------------------
2017-10-03 16:48:41.904183 WARNING Unexpected error in worker for App Alarm:
2017-10-03 16:48:41.908229 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T14:48:41.149288+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T14:45:53.347713+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [' ', "'", ',', '.', '0', '1', '2', '5', '6', '7', '8', '[', ']', '_', 'a', 'b', 'c', 'd', 'e', 'f', 'i', 'm', 'n', 'o', 'r', 's', 't', 'w', 'y'], 'friendly_name': 'House', 'triggeredBy': '', 'code_format': None, 'changedby': '', 'trippedsensors': [], 'changed_by': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T14:45:53.347713+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T14:45:53.347713+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'friendly_name': 'House', 'triggeredBy': '', 'code_format': None, 'changedby': '', 'trippedsensors': [], 'changed_by': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a79bb0>>, 'event': 'state_changed', 'id': UUID('32d3a95d-9b17-4a6d-8c18-5dc55da46def'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 16:48:41.935670 WARNING ------------------------------------------------------------
2017-10-03 16:48:41.962558 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/conf/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-03 16:48:41.965617 WARNING ------------------------------------------------------------
2017-10-03 16:54:04.674019 WARNING ------------------------------------------------------------
2017-10-03 16:54:04.704667 WARNING Unexpected error during loading of telegram:
2017-10-03 16:54:04.707574 WARNING ------------------------------------------------------------
2017-10-03 16:54:04.734989 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:54:04.738025 WARNING ------------------------------------------------------------
2017-10-03 16:54:04.820097 WARNING ------------------------------------------------------------
2017-10-03 16:54:04.840218 WARNING Unexpected error during loading of Telegram:
2017-10-03 16:54:04.843294 WARNING ------------------------------------------------------------
2017-10-03 16:54:04.848166 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 16:54:04.871519 WARNING ------------------------------------------------------------
2017-10-03 17:19:46.909974 WARNING ------------------------------------------------------------
2017-10-03 17:19:46.920256 WARNING Unexpected error during loading of telegram:
2017-10-03 17:19:46.923449 WARNING ------------------------------------------------------------
2017-10-03 17:19:46.950867 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 17:19:46.953921 WARNING ------------------------------------------------------------
2017-10-03 17:19:47.024630 WARNING ------------------------------------------------------------
2017-10-03 17:19:47.058324 WARNING Unexpected error during loading of Telegram:
2017-10-03 17:19:47.061261 WARNING ------------------------------------------------------------
2017-10-03 17:19:47.066141 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 17:19:47.108626 WARNING ------------------------------------------------------------
2017-10-03 20:15:47.712918 WARNING ------------------------------------------------------------
2017-10-03 20:15:47.720246 WARNING Unexpected error during loading of telegram:
2017-10-03 20:15:47.732219 WARNING ------------------------------------------------------------
2017-10-03 20:15:47.754446 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 910, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 20:15:47.770210 WARNING ------------------------------------------------------------
2017-10-03 20:15:47.799315 WARNING ------------------------------------------------------------
2017-10-03 20:15:47.832899 WARNING Unexpected error during loading of Telegram:
2017-10-03 20:15:47.835731 WARNING ------------------------------------------------------------
2017-10-03 20:15:47.853680 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 920, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 583, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-03 20:15:47.880197 WARNING ------------------------------------------------------------
2017-10-03 20:16:15.616779 WARNING ------------------------------------------------------------
2017-10-03 20:16:15.641075 WARNING Unexpected error in worker for App Alarm:
2017-10-03 20:16:15.651301 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T18:16:14.266529+00:00', 'state': 'pending', 'last_changed': '2017-10-03T18:16:14.266529+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': "{'name': 'Ultimate', 'chat_id': '444908880'}", 'code_format': None, 'trippedsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.switch_158d000186e9bd'], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T15:18:33.778549+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T15:18:33.778549+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': '', 'code_format': None, 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5955090>>, 'event': 'state_changed', 'id': UUID('9897824f-2f93-48b4-ba29-764c20dbb691'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 20:16:15.680194 WARNING ------------------------------------------------------------
2017-10-03 20:16:15.689174 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 26, in trigger
    self.telegram_notify(new_state, triggered_by)
  File "/home/homeassistant/conf/apps/alarm.py", line 48, in telegram_notify
    accessgroup = self.telegram.getAccessGroup(str(chat_id),telegram_groups)
AttributeError: 'NoneType' object has no attribute 'getAccessGroup'

2017-10-03 20:16:15.732469 WARNING ------------------------------------------------------------
2017-10-03 20:23:09.750811 WARNING ------------------------------------------------------------
2017-10-03 20:23:09.790547 WARNING Unexpected error in worker for App Alarm:
2017-10-03 20:23:09.871415 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T18:23:09.104521+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T18:21:17.190849+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [' ', "'", ',', '.', '0', '1', '2', '5', '6', '7', '8', '[', ']', '_', 'a', 'b', 'c', 'd', 'e', 'f', 'i', 'm', 'n', 'o', 'r', 's', 't', 'w', 'y'], 'friendly_name': 'House', 'triggeredBy': '', 'code_format': None, 'changed_by': '', 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T18:21:17.190849+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T18:21:17.190849+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'friendly_name': 'House', 'triggeredBy': '', 'code_format': None, 'changed_by': '', 'trippedsensors': [], 'changedby': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5955270>>, 'event': 'state_changed', 'id': UUID('c754ea44-575d-462a-8241-29a66242ceb9'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 20:23:09.898908 WARNING ------------------------------------------------------------
2017-10-03 20:23:09.918691 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/conf/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-03 20:23:09.954724 WARNING ------------------------------------------------------------
2017-10-03 20:27:12.210775 WARNING ------------------------------------------------------------
2017-10-03 20:27:12.235686 WARNING Unexpected error in worker for App Alarm:
2017-10-03 20:27:12.239631 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T18:27:11.527885+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T18:25:44.783396+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8'], 'friendly_name': 'House', 'triggeredBy': '', 'code_format': None, 'changedby': '', 'trippedsensors': [], 'changed_by': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T18:25:44.783396+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T18:25:44.783396+00:00', 'attributes': {'delayed': [], 'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'friendly_name': 'House', 'triggeredBy': '', 'code_format': None, 'changedby': '', 'trippedsensors': [], 'changed_by': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb59590b0>>, 'event': 'state_changed', 'id': UUID('a308ff6e-2e29-4dba-84aa-f510a6864cbb'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-03 20:27:12.262901 WARNING ------------------------------------------------------------
2017-10-03 20:27:12.269307 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/conf/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-03 20:27:12.312551 WARNING ------------------------------------------------------------
2017-10-03 21:13:36.970494 WARNING ------------------------------------------------------------
2017-10-03 21:13:37.040823 WARNING Unexpected error in worker for App Telegram:
2017-10-03 21:13:37.116757 WARNING Worker Ags: {'data': {'user_id': 444908880, 'from_first': 'Ultimate', 'chat_id': 444908880, 'text': 'Arm Stay', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb59553d0>>, 'event': 'telegram_text', 'id': UUID('3c7bf114-85d6-4ce1-8540-a034c4a4fd88'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-03 21:13:37.235619 WARNING ------------------------------------------------------------
2017-10-03 21:13:37.316356 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 139, in alarmFunction
    message = "Pending due to {}".format(true_service_result['attributes']['trippedsensors'])
KeyError: 'attributes'

2017-10-03 21:13:37.375357 WARNING ------------------------------------------------------------
2017-10-04 01:10:19.030808 WARNING ------------------------------------------------------------
2017-10-04 01:10:19.047868 WARNING Unexpected error in worker for App Alarm:
2017-10-04 01:10:19.058256 WARNING Worker Ags: {'data': {'new_state': {'last_updated': '2017-10-03T23:10:17.927224+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T23:06:26.612655+00:00', 'attributes': {'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'code_format': None, 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'trippedsensors': [], 'changedby': '', 'delayed': [], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': ['binary_sensor.switch_158d000186e9bd'], 'changed_by': '', 'triggeredBy': ''}, 'entity_id': 'alarm_control_panel.house'}, 'entity_id': 'alarm_control_panel.house', 'old_state': {'last_updated': '2017-10-03T23:06:26.612655+00:00', 'state': 'disarmed', 'last_changed': '2017-10-03T23:06:26.612655+00:00', 'attributes': {'immediate': [], 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'code_format': None, 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'trippedsensors': [], 'changedby': '', 'delayed': [], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'bypassedsensors': [], 'changed_by': '', 'triggeredBy': ''}, 'entity_id': 'alarm_control_panel.house'}}, 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a73f70>>, 'event': 'state_changed', 'id': UUID('fd343855-55be-451a-80bb-c91957e9496e'), 'name': 'Alarm', 'type': 'event', 'kwargs': {'entity_id': 'alarm_control_panel.house'}}
2017-10-04 01:10:19.144808 WARNING ------------------------------------------------------------
2017-10-04 01:10:19.210715 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/conf/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/conf/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-04 01:10:19.213771 WARNING ------------------------------------------------------------
2017-10-04 02:01:48.142676 WARNING ------------------------------------------------------------
2017-10-04 02:01:48.150271 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:01:48.160763 WARNING ------------------------------------------------------------
2017-10-04 02:01:48.167083 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 197
    message+="{} {}\n".format(u'\U0000274C',zone_friendly_name)
                                                              ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:01:48.180538 WARNING ------------------------------------------------------------
2017-10-04 02:01:50.142402 WARNING ------------------------------------------------------------
2017-10-04 02:01:50.150214 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:01:50.160334 WARNING ------------------------------------------------------------
2017-10-04 02:01:50.166639 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 197
    message+="{} {}\n".format(u'\U0000274C',zone_friendly_name)
                                                              ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:01:50.169640 WARNING ------------------------------------------------------------
2017-10-04 02:02:05.142363 WARNING ------------------------------------------------------------
2017-10-04 02:02:05.150213 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:02:05.160482 WARNING ------------------------------------------------------------
2017-10-04 02:02:05.166778 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 197
    message+="{} {}\n".format(u'\U0000274C',zone_friendly_name)
                                                              ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:02:05.179980 WARNING ------------------------------------------------------------
2017-10-04 02:02:13.149188 WARNING ------------------------------------------------------------
2017-10-04 02:02:13.160263 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:02:13.163187 WARNING ------------------------------------------------------------
2017-10-04 02:02:13.169090 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 198
    else:
        ^
IndentationError: unindent does not match any outer indentation level

2017-10-04 02:02:13.182600 WARNING ------------------------------------------------------------
2017-10-04 02:02:27.142721 WARNING ------------------------------------------------------------
2017-10-04 02:02:27.150274 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:02:27.160789 WARNING ------------------------------------------------------------
2017-10-04 02:02:27.167333 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 195
    if set(all_group_states[zone_id]['attributes']['entity_id']) <= set(bypassedSensors):
                                                                                        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:02:27.180650 WARNING ------------------------------------------------------------
2017-10-04 02:02:51.142224 WARNING ------------------------------------------------------------
2017-10-04 02:02:51.150229 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:02:51.160318 WARNING ------------------------------------------------------------
2017-10-04 02:02:51.166823 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 195
    if set(all_group_states[zone_id]['attributes']['entity_id']) <= set(bypassedSensors):
                                                                                        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:02:51.180077 WARNING ------------------------------------------------------------
2017-10-04 02:05:38.915206 WARNING ------------------------------------------------------------
2017-10-04 02:05:38.928404 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:05:38.942171 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'Zone Bypass', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb57948d0>>, 'event': 'telegram_text', 'id': UUID('0d638062-171f-448f-9bf8-338fcc9ed048'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:05:38.945194 WARNING ------------------------------------------------------------
2017-10-04 02:05:38.985435 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 202, in bypass
    keyboard.append("{} Menu,{} Back to Alarm Functions".format(u'\U0001f3e0',u'\U0001f448'))
NameError: name 'keyboard' is not defined

2017-10-04 02:05:38.988515 WARNING ------------------------------------------------------------
2017-10-04 02:06:40.313535 WARNING ------------------------------------------------------------
2017-10-04 02:06:40.338107 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:06:40.341755 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'Zone Bypass', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb57947f0>>, 'event': 'telegram_text', 'id': UUID('eaea560a-90ee-4b9c-b69a-1e48dcd1a9f1'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:06:40.344639 WARNING ------------------------------------------------------------
2017-10-04 02:06:40.375131 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 114, in receive_telegram_text
    simpleFunction(self,payload_event,accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 200, in bypass
    message+="{} {}\n".format(u'\U00002705',zone_friendly_name)
UnboundLocalError: local variable 'message' referenced before assignment

2017-10-04 02:06:40.398808 WARNING ------------------------------------------------------------
2017-10-04 02:32:22.163098 WARNING ------------------------------------------------------------
2017-10-04 02:32:22.170334 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:32:22.180266 WARNING ------------------------------------------------------------
2017-10-04 02:32:22.186603 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 187
    self.log("WARNING - {}".format(splitText))
                                             ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:32:22.189620 WARNING ------------------------------------------------------------
2017-10-04 02:32:23.195869 WARNING ------------------------------------------------------------
2017-10-04 02:32:23.198858 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:32:23.201804 WARNING ------------------------------------------------------------
2017-10-04 02:32:23.207874 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 187
    self.log("WARNING - {}".format(splitText))
                                             ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:32:23.223995 WARNING ------------------------------------------------------------
2017-10-04 02:32:58.860512 WARNING ------------------------------------------------------------
2017-10-04 02:32:58.871047 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:32:58.874530 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5aeb3f0>>, 'event': 'telegram_text', 'id': UUID('bbaf5118-7824-484d-9256-4104356944a7'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:32:58.877386 WARNING ------------------------------------------------------------
2017-10-04 02:32:58.917066 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 128, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
TypeError: bypassZone() takes 2 positional arguments but 3 were given

2017-10-04 02:32:58.940224 WARNING ------------------------------------------------------------
2017-10-04 02:43:14.783727 WARNING ------------------------------------------------------------
2017-10-04 02:43:14.799045 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:43:14.808872 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb57bba70>>, 'event': 'telegram_text', 'id': UUID('f635c4bf-3232-4c2a-8c5f-a3840767bae2'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:43:14.811944 WARNING ------------------------------------------------------------
2017-10-04 02:43:14.842152 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 128, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 192, in bypassZone
    if group[1]['attributes']['friendly_name'].lower() == "{} sensor".format(splitText[1]):
TypeError: 'NoneType' object is not subscriptable

2017-10-04 02:43:14.845470 WARNING ------------------------------------------------------------
2017-10-04 02:44:07.284343 WARNING ------------------------------------------------------------
2017-10-04 02:44:07.310257 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:44:07.314000 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass garage', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb596a6d0>>, 'event': 'telegram_text', 'id': UUID('2660672f-cfcb-4fb9-879d-02c4914d561b'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:44:07.321087 WARNING ------------------------------------------------------------
2017-10-04 02:44:07.351514 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 128, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 192, in bypassZone
    if group[1].lower() == "{} sensor".format(splitText[1]):
AttributeError: 'NoneType' object has no attribute 'lower'

2017-10-04 02:44:07.370217 WARNING ------------------------------------------------------------
2017-10-04 02:46:56.008765 WARNING ------------------------------------------------------------
2017-10-04 02:46:56.020210 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:46:56.023670 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a7c9f0>>, 'event': 'telegram_text', 'id': UUID('62c244df-6073-4294-a39e-1a747aa9e45e'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:46:56.031893 WARNING ------------------------------------------------------------
2017-10-04 02:46:56.071959 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 195, in bypassZone
    if group[1]['attributes'] == "{} sensor".format(splitText[1]):
TypeError: 'NoneType' object is not subscriptable

2017-10-04 02:46:56.080197 WARNING ------------------------------------------------------------
2017-10-04 02:47:22.151152 WARNING ------------------------------------------------------------
2017-10-04 02:47:22.160266 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:47:22.169560 WARNING ------------------------------------------------------------
2017-10-04 02:47:22.176035 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 196
    if group[1] == "{} sensor".format(splitText[1]):
                                                   ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:47:22.179016 WARNING ------------------------------------------------------------
2017-10-04 02:48:08.737926 WARNING ------------------------------------------------------------
2017-10-04 02:48:08.760411 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:48:08.780780 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5ac5970>>, 'event': 'telegram_text', 'id': UUID('b3638b7c-d075-4b81-b53b-861dc8d120f4'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:48:08.783786 WARNING ------------------------------------------------------------
2017-10-04 02:48:08.831340 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 195, in bypassZone
    self.log(group[1].get("attributes"))
AttributeError: 'NoneType' object has no attribute 'get'

2017-10-04 02:48:08.860900 WARNING ------------------------------------------------------------
2017-10-04 02:48:53.234033 WARNING ------------------------------------------------------------
2017-10-04 02:48:53.240263 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:48:53.260807 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5ac5b90>>, 'event': 'telegram_text', 'id': UUID('6426c8bc-ae6f-4554-b24f-a9574d56969b'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:48:53.263764 WARNING ------------------------------------------------------------
2017-10-04 02:48:53.314961 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 195, in bypassZone
    self.log(type(group[1]))
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 127, in log
    msg = self._sub_stack(msg)
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appapi.py", line 105, in _sub_stack
    msg = json.dumps(msg)
  File "/usr/lib/python3.4/json/__init__.py", line 230, in dumps
    return _default_encoder.encode(obj)
  File "/usr/lib/python3.4/json/encoder.py", line 192, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/lib/python3.4/json/encoder.py", line 250, in iterencode
    return _iterencode(o, 0)
  File "/usr/lib/python3.4/json/encoder.py", line 173, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: <class 'NoneType'> is not JSON serializable

2017-10-04 02:48:53.341020 WARNING ------------------------------------------------------------
2017-10-04 02:50:58.503562 WARNING ------------------------------------------------------------
2017-10-04 02:50:58.510260 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:50:58.520787 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a794b0>>, 'event': 'telegram_text', 'id': UUID('09b78deb-9ca6-41e9-a67a-e93f15de1824'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:50:58.523714 WARNING ------------------------------------------------------------
2017-10-04 02:50:58.563940 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 195, in bypassZone
    if group is not None and group[1]['attributes']['friendly_name'] == "{} sensor".format(splitText[1]):
TypeError: 'NoneType' object is not subscriptable

2017-10-04 02:50:58.600259 WARNING ------------------------------------------------------------
2017-10-04 02:51:27.148594 WARNING ------------------------------------------------------------
2017-10-04 02:51:27.160249 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:51:27.163173 WARNING ------------------------------------------------------------
2017-10-04 02:51:27.169407 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 197
    self.log("Entity_ID found {}".format(group[0]))
                                                  ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:51:27.182763 WARNING ------------------------------------------------------------
2017-10-04 02:51:40.208061 WARNING ------------------------------------------------------------
2017-10-04 02:51:40.238835 WARNING Unexpected error in worker for App Telegram:
2017-10-04 02:51:40.242436 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass downstairs', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb596ae10>>, 'event': 'telegram_text', 'id': UUID('476aad73-c715-4c31-86c3-9306ae0c4b0c'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 02:51:40.245390 WARNING ------------------------------------------------------------
2017-10-04 02:51:40.278478 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 196, in bypassZone
    if group[1]['attributes']['friendly_name'] == "{} sensor".format(splitText[1]):
TypeError: 'NoneType' object is not subscriptable

2017-10-04 02:51:40.301809 WARNING ------------------------------------------------------------
2017-10-04 02:57:48.142999 WARNING ------------------------------------------------------------
2017-10-04 02:57:48.151006 WARNING Unexpected error during loading of telegram.py:
2017-10-04 02:57:48.160224 WARNING ------------------------------------------------------------
2017-10-04 02:57:48.166792 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 197
    if group[1]['attributes']['friendly_name'].lower() == "{} sensor".format(splitText[1]):
                                                                                          ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 02:57:48.180014 WARNING ------------------------------------------------------------
2017-10-04 03:07:03.142473 WARNING ------------------------------------------------------------
2017-10-04 03:07:03.150225 WARNING Unexpected error during loading of telegram.py:
2017-10-04 03:07:03.160836 WARNING ------------------------------------------------------------
2017-10-04 03:07:03.167055 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 199
    if friendly_name_text == friendly_name_test
                                              ^
SyntaxError: invalid syntax

2017-10-04 03:07:03.180343 WARNING ------------------------------------------------------------
2017-10-04 03:07:50.150216 WARNING ------------------------------------------------------------
2017-10-04 03:07:50.160261 WARNING Unexpected error during loading of telegram.py:
2017-10-04 03:07:50.163171 WARNING ------------------------------------------------------------
2017-10-04 03:07:50.169101 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 201
    break
        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 03:07:50.182421 WARNING ------------------------------------------------------------
2017-10-04 03:07:58.142627 WARNING ------------------------------------------------------------
2017-10-04 03:07:58.150253 WARNING Unexpected error during loading of telegram.py:
2017-10-04 03:07:58.160708 WARNING ------------------------------------------------------------
2017-10-04 03:07:58.166720 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 201
    break
        ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 03:07:58.179979 WARNING ------------------------------------------------------------
2017-10-04 03:10:57.313924 WARNING ------------------------------------------------------------
2017-10-04 03:10:57.326483 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:10:57.350743 WARNING Worker Ags: {'data': {'user_id': 396287366, 'chat_id': 396287366, 'from_first': 'Legendary', 'text': 'bypass living room', 'from_last': 'Dav'}, 'function': <bound method TelegramBotEventListener.receive_telegram_text of <telegram.TelegramBotEventListener object at 0xb5a794b0>>, 'event': 'telegram_text', 'id': UUID('d48ada17-f811-48f2-a12a-00fea046db73'), 'name': 'Telegram', 'type': 'event', 'kwargs': {}}
2017-10-04 03:10:57.353792 WARNING ------------------------------------------------------------
2017-10-04 03:10:57.384099 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 527, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/conf/apps/telegram.py", line 124, in receive_telegram_text
    self.bypassZone(payload_event, accessgroup)
  File "/home/homeassistant/conf/apps/telegram.py", line 192, in bypassZone
    friendly_name_text = "{} sensors".format(join(splitText[1:]))
NameError: name 'join' is not defined

2017-10-04 03:10:57.390186 WARNING ------------------------------------------------------------
2017-10-04 03:19:12.144308 WARNING ------------------------------------------------------------
2017-10-04 03:19:12.158844 WARNING Unexpected error during loading of telegram.py:
2017-10-04 03:19:12.161885 WARNING ------------------------------------------------------------
2017-10-04 03:19:12.167934 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 201
    if entity_id not None:
                        ^
SyntaxError: invalid syntax

2017-10-04 03:19:12.181326 WARNING ------------------------------------------------------------
2017-10-04 03:23:13.143353 WARNING ------------------------------------------------------------
2017-10-04 03:23:13.150219 WARNING Unexpected error during loading of telegram.py:
2017-10-04 03:23:13.161571 WARNING ------------------------------------------------------------
2017-10-04 03:23:13.167729 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 899, in read_app
    importlib.reload(conf.modules[module_name])
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 149, in reload
    methods.exec(module)
  File "<frozen importlib._bootstrap>", line 1153, in exec
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1467, in exec_module
  File "<frozen importlib._bootstrap>", line 1572, in get_code
  File "<frozen importlib._bootstrap>", line 1532, in source_to_code
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 203
    self.bypass(payload_event,accessgroup)
                                         ^
TabError: inconsistent use of tabs and spaces in indentation

2017-10-04 03:23:13.181169 WARNING ------------------------------------------------------------
2017-10-04 03:26:12.146386 WARNING ------------------------------------------------------------
2017-10-04 03:26:12.161063 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:26:12.164313 WARNING Worker Ags: {'id': UUID('e50e9e1c-98af-499b-ad5d-e9e13990f722'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:26:12.167152 WARNING ------------------------------------------------------------
2017-10-04 03:26:12.201521 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:26:12.204556 WARNING ------------------------------------------------------------
2017-10-04 03:26:18.217424 WARNING ------------------------------------------------------------
2017-10-04 03:26:18.230244 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:26:18.233509 WARNING Worker Ags: {'id': UUID('e50e9e1c-98af-499b-ad5d-e9e13990f722'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:26:18.236327 WARNING ------------------------------------------------------------
2017-10-04 03:26:18.290654 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:26:18.293567 WARNING ------------------------------------------------------------
2017-10-04 03:26:27.110449 WARNING ------------------------------------------------------------
2017-10-04 03:26:27.120324 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:26:27.123562 WARNING Worker Ags: {'id': UUID('e50e9e1c-98af-499b-ad5d-e9e13990f722'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:26:27.126352 WARNING ------------------------------------------------------------
2017-10-04 03:26:27.140705 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:26:27.150195 WARNING ------------------------------------------------------------
2017-10-04 03:27:02.129136 WARNING ------------------------------------------------------------
2017-10-04 03:27:02.140300 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:27:02.143528 WARNING Worker Ags: {'id': UUID('43fc6f37-9bd3-4d1e-b9ba-2672311ae558'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:27:02.146371 WARNING ------------------------------------------------------------
2017-10-04 03:27:02.160686 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:27:02.163640 WARNING ------------------------------------------------------------
2017-10-04 03:27:11.110899 WARNING ------------------------------------------------------------
2017-10-04 03:27:11.120300 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:27:11.123579 WARNING Worker Ags: {'id': UUID('43fc6f37-9bd3-4d1e-b9ba-2672311ae558'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:27:11.126377 WARNING ------------------------------------------------------------
2017-10-04 03:27:11.140996 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:27:11.150245 WARNING ------------------------------------------------------------
2017-10-04 03:27:26.445385 WARNING ------------------------------------------------------------
2017-10-04 03:27:26.500343 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:27:26.551960 WARNING Worker Ags: {'id': UUID('43fc6f37-9bd3-4d1e-b9ba-2672311ae558'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:27:26.590976 WARNING ------------------------------------------------------------
2017-10-04 03:27:26.595212 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:27:26.598181 WARNING ------------------------------------------------------------
2017-10-04 03:29:25.591124 WARNING ------------------------------------------------------------
2017-10-04 03:29:25.610250 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:29:25.620566 WARNING Worker Ags: {'id': UUID('f3af1792-642d-4fd2-9185-de047ca811ad'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:29:25.623460 WARNING ------------------------------------------------------------
2017-10-04 03:29:25.627472 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:29:25.640631 WARNING ------------------------------------------------------------
2017-10-04 03:29:35.591860 WARNING ------------------------------------------------------------
2017-10-04 03:29:35.600277 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:29:35.603503 WARNING Worker Ags: {'id': UUID('f3af1792-642d-4fd2-9185-de047ca811ad'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:29:35.606270 WARNING ------------------------------------------------------------
2017-10-04 03:29:35.630659 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:29:35.633622 WARNING ------------------------------------------------------------
2017-10-04 03:29:44.597175 WARNING ------------------------------------------------------------
2017-10-04 03:29:44.610234 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:29:44.613454 WARNING Worker Ags: {'id': UUID('f3af1792-642d-4fd2-9185-de047ca811ad'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:29:44.616272 WARNING ------------------------------------------------------------
2017-10-04 03:29:44.630559 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:29:44.633495 WARNING ------------------------------------------------------------
2017-10-04 03:29:49.591651 WARNING ------------------------------------------------------------
2017-10-04 03:29:49.620086 WARNING Unexpected error in worker for App Telegram:
2017-10-04 03:29:49.623350 WARNING Worker Ags: {'id': UUID('f3af1792-642d-4fd2-9185-de047ca811ad'), 'name': 'Telegram', 'kwargs': {}, 'function': None, 'type': 'timer'}
2017-10-04 03:29:49.626175 WARNING ------------------------------------------------------------
2017-10-04 03:29:49.640484 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 517, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-04 03:29:49.643406 WARNING ------------------------------------------------------------
2017-10-04 18:02:12.928294 WARNING ------------------------------------------------------------
2017-10-04 18:02:12.943294 WARNING Unexpected error during loading of telegram.py:
2017-10-04 18:02:12.946299 WARNING ------------------------------------------------------------
2017-10-04 18:02:12.961130 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 914, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-04 18:02:12.964404 WARNING ------------------------------------------------------------
2017-10-04 18:48:17.463859 WARNING ------------------------------------------------------------
2017-10-04 18:48:17.471914 WARNING Unexpected error during loading of telegram.py:
2017-10-04 18:48:17.474873 WARNING ------------------------------------------------------------
2017-10-04 18:48:17.499498 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 914, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/conf/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-04 18:48:17.502985 WARNING ------------------------------------------------------------
2017-10-05 00:24:30.324301 WARNING ------------------------------------------------------------
2017-10-05 00:24:30.327424 WARNING Unexpected error:
2017-10-05 00:24:30.330232 WARNING ------------------------------------------------------------
2017-10-05 00:24:30.342020 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:30.344980 WARNING ------------------------------------------------------------
2017-10-05 00:24:31.325096 WARNING ------------------------------------------------------------
2017-10-05 00:24:31.328083 WARNING Unexpected error:
2017-10-05 00:24:31.330833 WARNING ------------------------------------------------------------
2017-10-05 00:24:31.335583 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:31.338466 WARNING ------------------------------------------------------------
2017-10-05 00:24:32.324020 WARNING ------------------------------------------------------------
2017-10-05 00:24:32.326964 WARNING Unexpected error:
2017-10-05 00:24:32.329715 WARNING ------------------------------------------------------------
2017-10-05 00:24:32.334463 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:32.337490 WARNING ------------------------------------------------------------
2017-10-05 00:24:33.324916 WARNING ------------------------------------------------------------
2017-10-05 00:24:33.327893 WARNING Unexpected error:
2017-10-05 00:24:33.330656 WARNING ------------------------------------------------------------
2017-10-05 00:24:33.335424 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:33.338321 WARNING ------------------------------------------------------------
2017-10-05 00:24:34.323980 WARNING ------------------------------------------------------------
2017-10-05 00:24:34.326908 WARNING Unexpected error:
2017-10-05 00:24:34.329648 WARNING ------------------------------------------------------------
2017-10-05 00:24:34.334400 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:34.337241 WARNING ------------------------------------------------------------
2017-10-05 00:24:35.325726 WARNING ------------------------------------------------------------
2017-10-05 00:24:35.335496 WARNING Unexpected error:
2017-10-05 00:24:35.338752 WARNING ------------------------------------------------------------
2017-10-05 00:24:35.343375 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:35.346278 WARNING ------------------------------------------------------------
2017-10-05 00:24:36.323994 WARNING ------------------------------------------------------------
2017-10-05 00:24:36.326932 WARNING Unexpected error:
2017-10-05 00:24:36.329699 WARNING ------------------------------------------------------------
2017-10-05 00:24:36.340441 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:36.343458 WARNING ------------------------------------------------------------
2017-10-05 00:24:37.324877 WARNING ------------------------------------------------------------
2017-10-05 00:24:37.327852 WARNING Unexpected error:
2017-10-05 00:24:37.330609 WARNING ------------------------------------------------------------
2017-10-05 00:24:37.335328 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:37.338333 WARNING ------------------------------------------------------------
2017-10-05 00:24:38.323934 WARNING ------------------------------------------------------------
2017-10-05 00:24:38.326860 WARNING Unexpected error:
2017-10-05 00:24:38.329605 WARNING ------------------------------------------------------------
2017-10-05 00:24:38.334362 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:38.337205 WARNING ------------------------------------------------------------
2017-10-05 00:24:39.335751 WARNING ------------------------------------------------------------
2017-10-05 00:24:39.338761 WARNING Unexpected error:
2017-10-05 00:24:39.341822 WARNING ------------------------------------------------------------
2017-10-05 00:24:39.346296 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:39.349230 WARNING ------------------------------------------------------------
2017-10-05 00:24:40.325585 WARNING ------------------------------------------------------------
2017-10-05 00:24:40.334316 WARNING Unexpected error:
2017-10-05 00:24:40.337536 WARNING ------------------------------------------------------------
2017-10-05 00:24:40.342193 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:40.345064 WARNING ------------------------------------------------------------
2017-10-05 00:24:41.325777 WARNING ------------------------------------------------------------
2017-10-05 00:24:41.328727 WARNING Unexpected error:
2017-10-05 00:24:41.331775 WARNING ------------------------------------------------------------
2017-10-05 00:24:41.336247 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:41.339121 WARNING ------------------------------------------------------------
2017-10-05 00:24:42.324104 WARNING ------------------------------------------------------------
2017-10-05 00:24:42.327061 WARNING Unexpected error:
2017-10-05 00:24:42.329824 WARNING ------------------------------------------------------------
2017-10-05 00:24:42.334563 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:42.337427 WARNING ------------------------------------------------------------
2017-10-05 00:24:43.325328 WARNING ------------------------------------------------------------
2017-10-05 00:24:43.328300 WARNING Unexpected error:
2017-10-05 00:24:43.331101 WARNING ------------------------------------------------------------
2017-10-05 00:24:43.335836 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:43.338726 WARNING ------------------------------------------------------------
2017-10-05 00:24:44.323604 WARNING ------------------------------------------------------------
2017-10-05 00:24:44.326589 WARNING Unexpected error:
2017-10-05 00:24:44.329338 WARNING ------------------------------------------------------------
2017-10-05 00:24:44.334178 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:44.337025 WARNING ------------------------------------------------------------
2017-10-05 00:24:45.326073 WARNING ------------------------------------------------------------
2017-10-05 00:24:45.336643 WARNING Unexpected error:
2017-10-05 00:24:45.339967 WARNING ------------------------------------------------------------
2017-10-05 00:24:45.344572 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:45.347443 WARNING ------------------------------------------------------------
2017-10-05 00:24:46.344003 WARNING ------------------------------------------------------------
2017-10-05 00:24:46.346907 WARNING Unexpected error:
2017-10-05 00:24:46.349693 WARNING ------------------------------------------------------------
2017-10-05 00:24:46.375071 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:46.377930 WARNING ------------------------------------------------------------
2017-10-05 00:24:47.325076 WARNING ------------------------------------------------------------
2017-10-05 00:24:47.328046 WARNING Unexpected error:
2017-10-05 00:24:47.330840 WARNING ------------------------------------------------------------
2017-10-05 00:24:47.335825 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:47.338741 WARNING ------------------------------------------------------------
2017-10-05 00:24:48.323585 WARNING ------------------------------------------------------------
2017-10-05 00:24:48.326546 WARNING Unexpected error:
2017-10-05 00:24:48.329397 WARNING ------------------------------------------------------------
2017-10-05 00:24:48.334448 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:48.337302 WARNING ------------------------------------------------------------
2017-10-05 00:24:49.324683 WARNING ------------------------------------------------------------
2017-10-05 00:24:49.327652 WARNING Unexpected error:
2017-10-05 00:24:49.330404 WARNING ------------------------------------------------------------
2017-10-05 00:24:49.335168 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:49.338300 WARNING ------------------------------------------------------------
2017-10-05 00:24:50.324110 WARNING ------------------------------------------------------------
2017-10-05 00:24:50.332628 WARNING Unexpected error:
2017-10-05 00:24:50.335862 WARNING ------------------------------------------------------------
2017-10-05 00:24:50.340640 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:50.343752 WARNING ------------------------------------------------------------
2017-10-05 00:24:51.325118 WARNING ------------------------------------------------------------
2017-10-05 00:24:51.328058 WARNING Unexpected error:
2017-10-05 00:24:51.330823 WARNING ------------------------------------------------------------
2017-10-05 00:24:51.335563 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:51.338432 WARNING ------------------------------------------------------------
2017-10-05 00:24:52.323378 WARNING ------------------------------------------------------------
2017-10-05 00:24:52.326358 WARNING Unexpected error:
2017-10-05 00:24:52.329094 WARNING ------------------------------------------------------------
2017-10-05 00:24:52.333796 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:52.336646 WARNING ------------------------------------------------------------
2017-10-05 00:24:53.325211 WARNING ------------------------------------------------------------
2017-10-05 00:24:53.328182 WARNING Unexpected error:
2017-10-05 00:24:53.331910 WARNING ------------------------------------------------------------
2017-10-05 00:24:53.336360 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:53.339361 WARNING ------------------------------------------------------------
2017-10-05 00:24:54.323904 WARNING ------------------------------------------------------------
2017-10-05 00:24:54.326848 WARNING Unexpected error:
2017-10-05 00:24:54.329587 WARNING ------------------------------------------------------------
2017-10-05 00:24:54.334291 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:54.337129 WARNING ------------------------------------------------------------
2017-10-05 00:24:55.326556 WARNING ------------------------------------------------------------
2017-10-05 00:24:55.335406 WARNING Unexpected error:
2017-10-05 00:24:55.338624 WARNING ------------------------------------------------------------
2017-10-05 00:24:55.343238 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:55.346114 WARNING ------------------------------------------------------------
2017-10-05 00:24:56.323911 WARNING ------------------------------------------------------------
2017-10-05 00:24:56.326856 WARNING Unexpected error:
2017-10-05 00:24:56.329617 WARNING ------------------------------------------------------------
2017-10-05 00:24:56.334303 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:56.337146 WARNING ------------------------------------------------------------
2017-10-05 00:24:57.325654 WARNING ------------------------------------------------------------
2017-10-05 00:24:57.328607 WARNING Unexpected error:
2017-10-05 00:24:57.331629 WARNING ------------------------------------------------------------
2017-10-05 00:24:57.336083 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:57.338955 WARNING ------------------------------------------------------------
2017-10-05 00:24:58.323626 WARNING ------------------------------------------------------------
2017-10-05 00:24:58.326578 WARNING Unexpected error:
2017-10-05 00:24:58.329314 WARNING ------------------------------------------------------------
2017-10-05 00:24:58.334059 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:58.337018 WARNING ------------------------------------------------------------
2017-10-05 00:24:59.325434 WARNING ------------------------------------------------------------
2017-10-05 00:24:59.328382 WARNING Unexpected error:
2017-10-05 00:24:59.331136 WARNING ------------------------------------------------------------
2017-10-05 00:24:59.335881 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:24:59.338739 WARNING ------------------------------------------------------------
2017-10-05 00:25:00.323675 WARNING ------------------------------------------------------------
2017-10-05 00:25:00.333902 WARNING Unexpected error:
2017-10-05 00:25:00.337185 WARNING ------------------------------------------------------------
2017-10-05 00:25:00.341753 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:00.344635 WARNING ------------------------------------------------------------
2017-10-05 00:25:01.348549 WARNING ------------------------------------------------------------
2017-10-05 00:25:01.351743 WARNING Unexpected error:
2017-10-05 00:25:01.354562 WARNING ------------------------------------------------------------
2017-10-05 00:25:01.359084 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:01.372184 WARNING ------------------------------------------------------------
2017-10-05 00:25:02.324122 WARNING ------------------------------------------------------------
2017-10-05 00:25:02.327088 WARNING Unexpected error:
2017-10-05 00:25:02.329838 WARNING ------------------------------------------------------------
2017-10-05 00:25:02.334575 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:02.337433 WARNING ------------------------------------------------------------
2017-10-05 00:25:03.324878 WARNING ------------------------------------------------------------
2017-10-05 00:25:03.327862 WARNING Unexpected error:
2017-10-05 00:25:03.330625 WARNING ------------------------------------------------------------
2017-10-05 00:25:03.335408 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:03.338254 WARNING ------------------------------------------------------------
2017-10-05 00:25:04.324133 WARNING ------------------------------------------------------------
2017-10-05 00:25:04.327078 WARNING Unexpected error:
2017-10-05 00:25:04.329824 WARNING ------------------------------------------------------------
2017-10-05 00:25:04.340534 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:04.343546 WARNING ------------------------------------------------------------
2017-10-05 00:25:05.325125 WARNING ------------------------------------------------------------
2017-10-05 00:25:05.336943 WARNING Unexpected error:
2017-10-05 00:25:05.340321 WARNING ------------------------------------------------------------
2017-10-05 00:25:05.344940 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:05.347861 WARNING ------------------------------------------------------------
2017-10-05 00:25:06.323548 WARNING ------------------------------------------------------------
2017-10-05 00:25:06.326490 WARNING Unexpected error:
2017-10-05 00:25:06.329285 WARNING ------------------------------------------------------------
2017-10-05 00:25:06.333996 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:06.336892 WARNING ------------------------------------------------------------
2017-10-05 00:25:07.333822 WARNING ------------------------------------------------------------
2017-10-05 00:25:07.336824 WARNING Unexpected error:
2017-10-05 00:25:07.339642 WARNING ------------------------------------------------------------
2017-10-05 00:25:07.345205 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:07.348150 WARNING ------------------------------------------------------------
2017-10-05 00:25:08.323938 WARNING ------------------------------------------------------------
2017-10-05 00:25:08.326896 WARNING Unexpected error:
2017-10-05 00:25:08.329665 WARNING ------------------------------------------------------------
2017-10-05 00:25:08.334389 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:08.337261 WARNING ------------------------------------------------------------
2017-10-05 00:25:09.325843 WARNING ------------------------------------------------------------
2017-10-05 00:25:09.328837 WARNING Unexpected error:
2017-10-05 00:25:09.331891 WARNING ------------------------------------------------------------
2017-10-05 00:25:09.336463 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:09.339326 WARNING ------------------------------------------------------------
2017-10-05 00:25:10.324090 WARNING ------------------------------------------------------------
2017-10-05 00:25:10.334169 WARNING Unexpected error:
2017-10-05 00:25:10.337446 WARNING ------------------------------------------------------------
2017-10-05 00:25:10.342043 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:10.344928 WARNING ------------------------------------------------------------
2017-10-05 00:25:11.325653 WARNING ------------------------------------------------------------
2017-10-05 00:25:11.328597 WARNING Unexpected error:
2017-10-05 00:25:11.331668 WARNING ------------------------------------------------------------
2017-10-05 00:25:11.336137 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:11.339014 WARNING ------------------------------------------------------------
2017-10-05 00:25:12.324265 WARNING ------------------------------------------------------------
2017-10-05 00:25:12.327187 WARNING Unexpected error:
2017-10-05 00:25:12.329938 WARNING ------------------------------------------------------------
2017-10-05 00:25:12.334664 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:12.337503 WARNING ------------------------------------------------------------
2017-10-05 00:25:13.325399 WARNING ------------------------------------------------------------
2017-10-05 00:25:13.328363 WARNING Unexpected error:
2017-10-05 00:25:13.331126 WARNING ------------------------------------------------------------
2017-10-05 00:25:13.335865 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:13.338732 WARNING ------------------------------------------------------------
2017-10-05 00:25:14.324210 WARNING ------------------------------------------------------------
2017-10-05 00:25:14.327162 WARNING Unexpected error:
2017-10-05 00:25:14.329907 WARNING ------------------------------------------------------------
2017-10-05 00:25:14.334639 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:14.337617 WARNING ------------------------------------------------------------
2017-10-05 00:25:15.325776 WARNING ------------------------------------------------------------
2017-10-05 00:25:15.334950 WARNING Unexpected error:
2017-10-05 00:25:15.338189 WARNING ------------------------------------------------------------
2017-10-05 00:25:15.343073 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:15.345977 WARNING ------------------------------------------------------------
2017-10-05 00:25:16.344054 WARNING ------------------------------------------------------------
2017-10-05 00:25:16.346987 WARNING Unexpected error:
2017-10-05 00:25:16.349783 WARNING ------------------------------------------------------------
2017-10-05 00:25:16.362147 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:16.367390 WARNING ------------------------------------------------------------
2017-10-05 00:25:17.327309 WARNING ------------------------------------------------------------
2017-10-05 00:25:17.330289 WARNING Unexpected error:
2017-10-05 00:25:17.333379 WARNING ------------------------------------------------------------
2017-10-05 00:25:17.337797 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:17.340740 WARNING ------------------------------------------------------------
2017-10-05 00:25:18.324302 WARNING ------------------------------------------------------------
2017-10-05 00:25:18.327244 WARNING Unexpected error:
2017-10-05 00:25:18.329980 WARNING ------------------------------------------------------------
2017-10-05 00:25:18.334784 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:18.337631 WARNING ------------------------------------------------------------
2017-10-05 00:25:19.325181 WARNING ------------------------------------------------------------
2017-10-05 00:25:19.328148 WARNING Unexpected error:
2017-10-05 00:25:19.330949 WARNING ------------------------------------------------------------
2017-10-05 00:25:19.335779 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:19.338793 WARNING ------------------------------------------------------------
2017-10-05 00:25:20.323840 WARNING ------------------------------------------------------------
2017-10-05 00:25:20.333784 WARNING Unexpected error:
2017-10-05 00:25:20.337042 WARNING ------------------------------------------------------------
2017-10-05 00:25:20.341643 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:20.344521 WARNING ------------------------------------------------------------
2017-10-05 00:25:21.324789 WARNING ------------------------------------------------------------
2017-10-05 00:25:21.327814 WARNING Unexpected error:
2017-10-05 00:25:21.330951 WARNING ------------------------------------------------------------
2017-10-05 00:25:21.335723 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:21.338608 WARNING ------------------------------------------------------------
2017-10-05 00:25:22.323970 WARNING ------------------------------------------------------------
2017-10-05 00:25:22.326885 WARNING Unexpected error:
2017-10-05 00:25:22.329692 WARNING ------------------------------------------------------------
2017-10-05 00:25:22.334700 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:22.337558 WARNING ------------------------------------------------------------
2017-10-05 00:25:23.325031 WARNING ------------------------------------------------------------
2017-10-05 00:25:23.328004 WARNING Unexpected error:
2017-10-05 00:25:23.330839 WARNING ------------------------------------------------------------
2017-10-05 00:25:23.335868 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:23.338755 WARNING ------------------------------------------------------------
2017-10-05 00:25:24.323502 WARNING ------------------------------------------------------------
2017-10-05 00:25:24.326453 WARNING Unexpected error:
2017-10-05 00:25:24.329219 WARNING ------------------------------------------------------------
2017-10-05 00:25:24.333997 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:24.337106 WARNING ------------------------------------------------------------
2017-10-05 00:25:25.325593 WARNING ------------------------------------------------------------
2017-10-05 00:25:25.334294 WARNING Unexpected error:
2017-10-05 00:25:25.337490 WARNING ------------------------------------------------------------
2017-10-05 00:25:25.344072 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:25.348758 WARNING ------------------------------------------------------------
2017-10-05 00:25:26.323734 WARNING ------------------------------------------------------------
2017-10-05 00:25:26.326687 WARNING Unexpected error:
2017-10-05 00:25:26.329454 WARNING ------------------------------------------------------------
2017-10-05 00:25:26.334229 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:26.337093 WARNING ------------------------------------------------------------
2017-10-05 00:25:27.325708 WARNING ------------------------------------------------------------
2017-10-05 00:25:27.328676 WARNING Unexpected error:
2017-10-05 00:25:27.331715 WARNING ------------------------------------------------------------
2017-10-05 00:25:27.336248 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:27.339135 WARNING ------------------------------------------------------------
2017-10-05 00:25:28.323758 WARNING ------------------------------------------------------------
2017-10-05 00:25:28.326708 WARNING Unexpected error:
2017-10-05 00:25:28.329456 WARNING ------------------------------------------------------------
2017-10-05 00:25:28.334198 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:28.337097 WARNING ------------------------------------------------------------
2017-10-05 00:25:29.325295 WARNING ------------------------------------------------------------
2017-10-05 00:25:29.328241 WARNING Unexpected error:
2017-10-05 00:25:29.331032 WARNING ------------------------------------------------------------
2017-10-05 00:25:29.335781 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:29.338697 WARNING ------------------------------------------------------------
2017-10-05 00:25:30.324521 WARNING ------------------------------------------------------------
2017-10-05 00:25:30.333341 WARNING Unexpected error:
2017-10-05 00:25:30.336569 WARNING ------------------------------------------------------------
2017-10-05 00:25:30.341333 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:30.344237 WARNING ------------------------------------------------------------
2017-10-05 00:25:31.323433 WARNING ------------------------------------------------------------
2017-10-05 00:25:31.326351 WARNING Unexpected error:
2017-10-05 00:25:31.329113 WARNING ------------------------------------------------------------
2017-10-05 00:25:31.333826 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:31.336679 WARNING ------------------------------------------------------------
2017-10-05 00:25:32.330080 WARNING ------------------------------------------------------------
2017-10-05 00:25:32.333237 WARNING Unexpected error:
2017-10-05 00:25:32.336011 WARNING ------------------------------------------------------------
2017-10-05 00:25:32.340486 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:32.345090 WARNING ------------------------------------------------------------
2017-10-05 00:25:33.326042 WARNING ------------------------------------------------------------
2017-10-05 00:25:33.328955 WARNING Unexpected error:
2017-10-05 00:25:33.331981 WARNING ------------------------------------------------------------
2017-10-05 00:25:33.336429 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:25:33.339299 WARNING ------------------------------------------------------------
2017-10-05 00:25:34.616005 WARNING ------------------------------------------------------------
2017-10-05 00:25:34.619080 WARNING Unexpected error:
2017-10-05 00:25:34.652924 WARNING ------------------------------------------------------------
2017-10-05 00:25:34.657420 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 805, in check_config
    modified = os.path.getmtime(config_file)
  File "/srv/homeassistant/lib/python3.4/genericpath.py", line 55, in getmtime
    return os.stat(filename).st_mtime
FileNotFoundError: [Errno 2] No such file or directory: '/home/homeassistant/conf/appdaemon.yaml'

2017-10-05 00:32:25.591205 WARNING ------------------------------------------------------------
2017-10-05 00:32:25.594271 WARNING Unexpected error during loading of telegram.py:
2017-10-05 00:32:25.597195 WARNING ------------------------------------------------------------
2017-10-05 00:32:26.351552 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 914, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/config/appdaemon/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-05 00:32:26.354836 WARNING ------------------------------------------------------------
2017-10-05 00:34:47.235405 WARNING ------------------------------------------------------------
2017-10-05 00:34:47.249055 WARNING Unexpected error during loading of telegram:
2017-10-05 00:34:47.253626 WARNING ------------------------------------------------------------
2017-10-05 00:34:47.293887 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 903, in read_app
    importlib.reload(conf.modules[module_name])
KeyError: 'telegram'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 914, in read_app
    conf.modules[module_name] = importlib.import_module(module_name)
  File "/srv/homeassistant/lib/python3.4/importlib/__init__.py", line 109, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
  File "<frozen importlib._bootstrap>", line 2254, in _gcd_import
  File "<frozen importlib._bootstrap>", line 2237, in _find_and_load
  File "<frozen importlib._bootstrap>", line 2226, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 1200, in _load_unlocked
  File "<frozen importlib._bootstrap>", line 1129, in _exec
  File "<frozen importlib._bootstrap>", line 1471, in exec_module
  File "<frozen importlib._bootstrap>", line 321, in _call_with_frames_removed
  File "/home/homeassistant/config/appdaemon/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-05 00:34:47.308890 WARNING ------------------------------------------------------------
2017-10-05 00:34:47.366473 WARNING ------------------------------------------------------------
2017-10-05 00:34:47.410895 WARNING Unexpected error during loading of Telegram:
2017-10-05 00:34:47.414391 WARNING ------------------------------------------------------------
2017-10-05 00:34:47.449602 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 924, in read_app
    init_object(name, class_name, module_name, config[name])
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 587, in init_object
    module = __import__(module_name)
  File "/home/homeassistant/config/appdaemon/apps/telegram.py", line 24, in <module>
    'armStay'          :TelegramBotEventListener.alarmFunction,
NameError: name 'TelegramBotEventListener' is not defined

2017-10-05 00:34:47.452672 WARNING ------------------------------------------------------------
2017-10-05 00:37:15.188941 WARNING ------------------------------------------------------------
2017-10-05 00:37:15.218877 WARNING Unexpected error in worker for App Alarm:
2017-10-05 00:37:15.232811 WARNING Worker Ags: {'id': UUID('c1dac1a2-12d2-47ee-981e-0d419d9206bb'), 'name': 'Alarm', 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'event': 'state_changed', 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b5fe50>>, 'type': 'event', 'data': {'old_state': {'last_updated': '2017-10-04T22:30:27.026938+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': [], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}, 'entity_id': 'alarm_control_panel.house', 'new_state': {'last_updated': '2017-10-04T22:37:14.024394+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}}}
2017-10-05 00:37:15.259365 WARNING ------------------------------------------------------------
2017-10-05 00:37:15.320407 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 528, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-05 00:37:15.332499 WARNING ------------------------------------------------------------
2017-10-05 00:37:24.488853 WARNING ------------------------------------------------------------
2017-10-05 00:37:24.598474 WARNING Unexpected error in worker for App Alarm:
2017-10-05 00:37:24.619826 WARNING Worker Ags: {'id': UUID('c1dac1a2-12d2-47ee-981e-0d419d9206bb'), 'name': 'Alarm', 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'event': 'state_changed', 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b5fe50>>, 'type': 'event', 'data': {'old_state': {'last_updated': '2017-10-04T22:37:14.024394+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}, 'entity_id': 'alarm_control_panel.house', 'new_state': {'last_updated': '2017-10-04T22:37:23.295914+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}}}
2017-10-05 00:37:24.668361 WARNING ------------------------------------------------------------
2017-10-05 00:37:24.719518 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 528, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-05 00:37:24.732846 WARNING ------------------------------------------------------------
2017-10-05 00:38:57.038201 WARNING ------------------------------------------------------------
2017-10-05 00:38:57.049084 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:38:57.056450 WARNING Worker Ags: {'id': UUID('50c4cfb9-51aa-40d6-b8f0-c1fa339f44f4'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:38:57.065921 WARNING ------------------------------------------------------------
2017-10-05 00:38:57.079675 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:38:57.085734 WARNING ------------------------------------------------------------
2017-10-05 00:39:06.037673 WARNING ------------------------------------------------------------
2017-10-05 00:39:06.046935 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:39:06.056019 WARNING Worker Ags: {'id': UUID('50c4cfb9-51aa-40d6-b8f0-c1fa339f44f4'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:39:06.067677 WARNING ------------------------------------------------------------
2017-10-05 00:39:06.088847 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:39:06.092720 WARNING ------------------------------------------------------------
2017-10-05 00:39:17.001119 WARNING ------------------------------------------------------------
2017-10-05 00:39:17.080803 WARNING Unexpected error in worker for App Alarm:
2017-10-05 00:39:17.155123 WARNING Worker Ags: {'id': UUID('c1dac1a2-12d2-47ee-981e-0d419d9206bb'), 'name': 'Alarm', 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'event': 'state_changed', 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5b5fe50>>, 'type': 'event', 'data': {'old_state': {'last_updated': '2017-10-04T22:37:23.295914+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}, 'entity_id': 'alarm_control_panel.house', 'new_state': {'last_updated': '2017-10-04T22:39:16.105711+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}}}
2017-10-05 00:39:17.248328 WARNING ------------------------------------------------------------
2017-10-05 00:39:17.275581 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 528, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-05 00:39:17.309697 WARNING ------------------------------------------------------------
2017-10-05 00:40:35.571316 WARNING ------------------------------------------------------------
2017-10-05 00:40:35.609089 WARNING Unexpected error in worker for App Alarm:
2017-10-05 00:40:35.616042 WARNING Worker Ags: {'id': UUID('49b5cecc-9b40-4d38-bd50-54b88361517e'), 'name': 'Alarm', 'kwargs': {'entity_id': 'alarm_control_panel.house'}, 'event': 'state_changed', 'function': <bound method AlarmReaction.alarmListener of <alarm.AlarmReaction object at 0xb5a9a2d0>>, 'type': 'event', 'data': {'old_state': {'last_updated': '2017-10-04T22:39:16.105711+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}, 'entity_id': 'alarm_control_panel.house', 'new_state': {'last_updated': '2017-10-04T22:40:34.471104+00:00', 'state': 'disarmed', 'entity_id': 'alarm_control_panel.house', 'attributes': {'trippedsensors': [], 'changed_by': '', 'zones': ['group.zone_downstairs', 'group.zone_garage', 'group.zone_kitchen', 'group.zone_living_room', 'group.zone_outside', 'group.zone_upstairs'], 'ignored': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'friendly_name': 'House', 'triggeredBy': '', 'allsensors': ['binary_sensor.door_window_sensor_158d000187120a', 'binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'delayed': [], 'bypassedsensors': ['binary_sensor.motion_sensor_158d00016dcfa8', 'binary_sensor.switch_158d000186e9bd'], 'code_format': None, 'changedby': '', 'immediate': []}, 'last_changed': '2017-10-04T22:30:27.026938+00:00'}}}
2017-10-05 00:40:35.623752 WARNING ------------------------------------------------------------
2017-10-05 00:40:35.665364 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 528, in worker
    function(args["event"], data, args["kwargs"])
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 16, in alarmListener
    self.trigger(data,kwargs)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 23, in trigger
    triggered_by = self.getTriggeredBy(data)
  File "/home/homeassistant/config/appdaemon/apps/alarm.py", line 37, in getTriggeredBy
    triggered_by = json.loads(triggered_by.replace("\'","\""))
  File "/usr/lib/python3.4/json/__init__.py", line 318, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python3.4/json/decoder.py", line 343, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python3.4/json/decoder.py", line 361, in raw_decode
    raise ValueError(errmsg("Expecting value", s, err.value)) from None
ValueError: Expecting value: line 1 column 1 (char 0)

2017-10-05 00:40:35.699120 WARNING ------------------------------------------------------------
2017-10-05 00:40:59.037522 WARNING ------------------------------------------------------------
2017-10-05 00:40:59.048975 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:40:59.053849 WARNING Worker Ags: {'id': UUID('50c4cfb9-51aa-40d6-b8f0-c1fa339f44f4'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:40:59.065307 WARNING ------------------------------------------------------------
2017-10-05 00:40:59.078409 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:40:59.098329 WARNING ------------------------------------------------------------
2017-10-05 00:42:19.037723 WARNING ------------------------------------------------------------
2017-10-05 00:42:19.049095 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:42:19.053941 WARNING Worker Ags: {'id': UUID('50c4cfb9-51aa-40d6-b8f0-c1fa339f44f4'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:42:19.062795 WARNING ------------------------------------------------------------
2017-10-05 00:42:19.079598 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:42:19.087057 WARNING ------------------------------------------------------------
2017-10-05 00:44:23.037864 WARNING ------------------------------------------------------------
2017-10-05 00:44:23.048407 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:44:23.056667 WARNING Worker Ags: {'id': UUID('50c4cfb9-51aa-40d6-b8f0-c1fa339f44f4'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:44:23.065095 WARNING ------------------------------------------------------------
2017-10-05 00:44:23.079656 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:44:23.085664 WARNING ------------------------------------------------------------
2017-10-05 00:46:28.038354 WARNING ------------------------------------------------------------
2017-10-05 00:46:28.049057 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:46:28.055966 WARNING Worker Ags: {'id': UUID('bcae7a77-eb25-4831-b56e-b7ece9578b11'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:46:28.064432 WARNING ------------------------------------------------------------
2017-10-05 00:46:28.075456 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:46:28.089461 WARNING ------------------------------------------------------------
2017-10-05 00:46:34.038574 WARNING ------------------------------------------------------------
2017-10-05 00:46:34.049030 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:46:34.056103 WARNING Worker Ags: {'id': UUID('bcae7a77-eb25-4831-b56e-b7ece9578b11'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:46:34.068289 WARNING ------------------------------------------------------------
2017-10-05 00:46:34.080954 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:46:34.098326 WARNING ------------------------------------------------------------
2017-10-05 00:46:45.038217 WARNING ------------------------------------------------------------
2017-10-05 00:46:45.049052 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:46:45.056099 WARNING Worker Ags: {'id': UUID('bcae7a77-eb25-4831-b56e-b7ece9578b11'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:46:45.066229 WARNING ------------------------------------------------------------
2017-10-05 00:46:45.083197 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:46:45.087720 WARNING ------------------------------------------------------------
2017-10-05 00:46:53.078711 WARNING ------------------------------------------------------------
2017-10-05 00:46:53.087740 WARNING Unexpected error in worker for App Telegram:
2017-10-05 00:46:53.100868 WARNING Worker Ags: {'id': UUID('bcae7a77-eb25-4831-b56e-b7ece9578b11'), 'name': 'Telegram', 'type': 'timer', 'kwargs': {}, 'function': None}
2017-10-05 00:46:53.108275 WARNING ------------------------------------------------------------
2017-10-05 00:46:53.125441 WARNING Traceback (most recent call last):
  File "/srv/homeassistant/lib/python3.4/site-packages/appdaemon/appdaemon.py", line 518, in worker
    function(ha.sanitize_timer_kwargs(args["kwargs"]))
TypeError: 'NoneType' object is not callable

2017-10-05 00:46:53.149529 WARNING ------------------------------------------------------------
